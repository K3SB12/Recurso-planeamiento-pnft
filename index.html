<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Plantilla de Planeamiento Did√°ctico - PNFT 2026</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* ===== VARIABLES Y RESET ===== */
        :root {
            --primary-color: #45258F;
            --secondary-color: #6c47c9;
            --light-purple: #f0ebf9;
            --border-color: #dee2e6;
            --text-color: #333;
            --success-color: #28a745;
            --danger-color: #dc3545;
            --warning-color: #ffc107;
            --container-width: 11.5in;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', sans-serif !important;
        }

        /* ===== TIPOGRAF√çA GLOBAL ===== */
        body {
            font-family: 'Poppins', sans-serif;
            margin: 0;
            padding: 20px;
            line-height: 1.5;
            background-color: #f8f9fa;
            color: var(--text-color);
            font-size: 14px;
        }

        /* ===== CONTENEDOR PRINCIPAL ===== */
        .container {
            width: var(--container-width);
            min-width: 1000px;
            margin: 0 auto;
            background: white;
            padding: 35px;
            border-radius: 12px;
            box-shadow: 0 5px 25px rgba(0,0,0,0.1);
        }

        /* ===== ENCABEZADO ===== */
        .header {
            text-align: center;
            margin-bottom: 25px;
            border-bottom: 4px solid var(--primary-color);
            padding-bottom: 25px;
        }

        .header h1 {
            margin: 8px 0;
            font-size: 24px;
            color: var(--primary-color);
            font-weight: 700;
        }

        .header h2 {
            margin: 8px 0;
            font-size: 18px;
            color: var(--secondary-color);
            font-weight: 500;
        }

        .year {
            font-size: 16px;
            font-weight: 600;
            color: var(--primary-color);
        }

        /* ===== TABLAS MEJORADAS ===== */
        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }

        td {
            border: 1px solid var(--border-color);
            padding: 12px;
            vertical-align: top;
        }

        /* ===== SECCIONES Y T√çTULOS ===== */
        .section-title {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            font-weight: 600;
            text-align: center;
            padding: 12px 20px;
            margin: 15px 0;
            border-radius: 8px;
            font-size: 15px;
            box-shadow: 0 2px 8px rgba(69, 37, 143, 0.3);
        }

        /* ===== FORMULARIOS MEJORADAS ===== */
        .input-field, .select-field, .textarea-field {
            width: 100%;
            border: 2px solid var(--border-color);
            outline: none;
            font-size: 14px;
            padding: 10px 14px;
            border-radius: 6px;
            transition: all 0.3s ease;
            background: white;
            font-family: 'Poppins', sans-serif;
        }

        .input-field:focus, .select-field:focus, .textarea-field:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(69, 37, 143, 0.1);
            transform: translateY(-1px);
        }

        .small-input {
            width: 120px;
            padding: 8px 10px;
        }

        .textarea-field {
            resize: vertical;
            min-height: 80px;
            line-height: 1.4;
            font-family: 'Poppins', sans-serif;
        }

        .full-width {
            width: 100%;
        }

        /* ===== CHECKBOXES Y RADIOS MEJORADAS ===== */
        .checkbox-group {
            margin: 8px 0;
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
        }

        input[type="checkbox"], input[type="radio"] {
            margin-right: 8px;
            transform: scale(1.1);
        }

        label {
            cursor: pointer;
            font-size: 14px;
            display: flex;
            align-items: center;
            padding: 5px 0;
            font-family: 'Poppins', sans-serif;
        }

        /* ===== √ÅREAS DE CONOCIMIENTO ===== */
        .areas-options {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .areas-options label {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 8px 12px;
            background: #f8f9fa;
            border-radius: 6px;
            transition: background-color 0.3s ease;
        }

        .areas-options label:hover {
            background: var(--light-purple);
        }

        /* ===== RDA CONTAINER MEJORADO ===== */
        .rda-container {
            min-height: 180px;
            max-height: 400px;
            overflow-y: auto;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
            border: 1px solid var(--border-color);
            font-family: 'Poppins', sans-serif;
            line-height: 1.6;
        }

        .rda-item {
            padding: 15px;
            margin-bottom: 15px;
            border-bottom: 1px solid var(--border-color);
            font-size: 14px;
            line-height: 1.6;
            background: white;
            border-radius: 6px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            font-family: 'Poppins', sans-serif;
            page-break-inside: avoid;
        }

        .rda-item strong {
            color: var(--primary-color);
            font-weight: 600;
        }

        .rda-divider {
            height: 2px;
            background: linear-gradient(90deg, transparent, var(--primary-color), transparent);
            margin: 15px 0;
            opacity: 0.5;
        }

        /* ===== SABERES CONCEPTUALES ===== */
        .saberes-info {
            padding: 25px;
            text-align: center;
            color: #666;
            font-style: italic;
            background: var(--light-purple);
            border-radius: 8px;
            margin: 15px 0;
        }

        .saberes-options {
            display: flex;
            flex-direction: column;
            gap: 8px;
            max-height: 500px;
            overflow-y: auto;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
            border: 1px solid var(--border-color);
        }

        .saberes-options label {
            display: flex;
            align-items: flex-start;
            gap: 10px;
            font-size: 13px;
            line-height: 1.4;
            padding: 8px 12px;
            background: white;
            border-radius: 6px;
            transition: all 0.3s ease;
        }

        .saberes-options label:hover {
            background: var(--light-purple);
            transform: translateX(5px);
        }

        .saber-item {
            display: block;
            margin: 6px 0;
            padding: 10px 14px;
            border-radius: 6px;
            transition: all 0.3s ease;
            font-size: 13px;
            background: white;
            border: 1px solid var(--border-color);
        }

        .saber-item:hover {
            background: var(--light-purple);
            border-color: var(--primary-color);
            transform: translateY(-2px);
            box-shadow: 0 2px 8px rgba(69, 37, 143, 0.1);
        }

        .saber-item input[type="checkbox"] {
            margin-right: 10px;
            margin-top: 2px;
        }

        .area-saberes {
            margin-bottom: 20px;
            padding: 20px;
            border-left: 4px solid var(--primary-color);
            background: linear-gradient(135deg, #f8f9fa, white);
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .area-saberes strong {
            color: var(--primary-color);
            font-weight: 600;
            font-size: 15px;
            display: block;
            margin-bottom: 10px;
        }

        /* ===== SISTEMA DE SEMANAS MEJORADO ===== */
        .semanas-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding: 20px;
            background: var(--light-purple);
            border-radius: 10px;
            border: 2px dashed var(--primary-color);
        }

        .semanas-controls strong {
            color: var(--primary-color);
            font-weight: 600;
            font-size: 16px;
        }

        .semana-item {
            border: 3px solid var(--primary-color);
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 30px;
            background: linear-gradient(135deg, #f8f9fa, white);
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            width: 100%;
            min-height: 400px;
            display: flex;
            flex-direction: column;
        }

        .semana-item:hover {
            box-shadow: 0 6px 20px rgba(69, 37, 143, 0.15);
            transform: translateY(-2px);
        }

        .semana-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--border-color);
            flex-shrink: 0;
        }

        .semana-header strong {
            color: var(--primary-color);
            font-weight: 600;
            font-size: 16px;
        }

        .semana-nombre {
            width: 200px !important;
            font-weight: 500;
            color: var(--primary-color);
        }

        .lecciones-info {
            color: #666;
            font-size: 14px;
            font-weight: 500;
        }

        .semana-content {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 15px;
            margin-bottom: 20px;
            flex: 1;
            min-height: 300px;
        }

        .semana-col {
            display: flex;
            flex-direction: column;
            min-height: 300px;
            position: relative;
        }

        .semana-col-title {
            background: var(--primary-color);
            color: white;
            padding: 10px;
            text-align: center;
            border-radius: 6px;
            margin-bottom: 10px;
            font-weight: 600;
            flex-shrink: 0;
            position: relative;
        }

        /* ===== SOLUCI√ìN DEFINITIVA: CONTENEDORES EDITABLES ===== */
        .contenedor-editable {
            flex: 1;
            min-height: 150px;
            border: 2px solid var(--border-color);
            border-radius: 6px;
            padding: 12px;
            font-family: 'Poppins', sans-serif;
            font-size: 14px;
            line-height: 1.4;
            background: white;
            overflow-y: auto;
            resize: vertical;
            transition: all 0.3s ease;
            outline: none;
        }

        .contenedor-editable:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(69, 37, 143, 0.1);
        }

        .contenedor-editable[contenteditable="true"]:empty:before {
            content: attr(data-placeholder);
            color: #999;
            font-style: italic;
        }

        .expand-btn {
            position: absolute;
            top: 5px;
            right: 5px;
            background: rgba(255, 255, 255, 0.3);
            border: none;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            cursor: pointer;
            font-size: 12px;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .expand-btn:hover {
            background: rgba(255, 255, 255, 0.5);
            transform: scale(1.1);
        }

        .saberes-semana-container {
            margin-top: 25px;
            padding: 25px;
            background: white;
            border-radius: 10px;
            border: 2px solid var(--border-color);
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            min-height: 250px;
            flex-shrink: 0;
        }

        .saberes-semana-opciones {
            min-height: 200px;
            max-height: 300px;
            overflow-y: auto;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
            border: 1px solid var(--border-color);
        }

        /* ===== BOTONES MEJORADOS ===== */
        .action-buttons {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 40px;
            padding-top: 25px;
            border-top: 3px solid var(--light-purple);
        }

        .btn {
            padding: 14px 28px;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 8px;
            font-family: 'Poppins', sans-serif;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            box-shadow: 0 4px 12px rgba(69, 37, 143, 0.3);
        }

        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(69, 37, 143, 0.4);
        }

        .btn-secondary {
            background: linear-gradient(135deg, #6c757d, #545b62);
            color: white;
            box-shadow: 0 4px 12px rgba(108, 117, 125, 0.3);
        }

        .btn-secondary:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(108, 117, 125, 0.4);
        }

        .btn-outline {
            background: transparent;
            border: 2px solid var(--primary-color);
            color: var(--primary-color);
        }

        .btn-outline:hover {
            background: var(--light-purple);
            transform: translateY(-3px);
            box-shadow: 0 4px 12px rgba(69, 37, 143, 0.2);
        }

        .copilot-btn {
            background: linear-gradient(135deg, #0078d4, #106ebe);
            color: white;
            border: none;
            padding: 10px 18px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 13px;
            margin-top: 10px;
            transition: all 0.3s ease;
            font-weight: 500;
            box-shadow: 0 2px 8px rgba(0, 120, 212, 0.3);
            font-family: 'Poppins', sans-serif;
        }

        .copilot-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0, 120, 212, 0.4);
        }

        .btn-agregar-semana {
            background: linear-gradient(135deg, var(--success-color), #218838);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 2px 8px rgba(40, 167, 69, 0.3);
            font-family: 'Poppins', sans-serif;
        }

        .btn-agregar-semana:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(40, 167, 69, 0.4);
        }

        .btn-eliminar-semana {
            background: linear-gradient(135deg, var(--danger-color), #c82333);
            color: white;
            border: none;
            border-radius: 50%;
            width: 32px;
            height: 32px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
            box-shadow: 0 2px 6px rgba(220, 53, 69, 0.3);
        }

        .btn-eliminar-semana:hover {
            transform: scale(1.1);
            box-shadow: 0 4px 12px rgba(220, 53, 69, 0.4);
        }

        /* ===== SABERES MANUALES ===== */
        .saberes-manuales-container {
            margin-top: 20px;
            padding: 20px;
            background: linear-gradient(135deg, #fff3cd, #ffeaa7);
            border-radius: 10px;
            border: 2px dashed var(--warning-color);
        }

        .saberes-manuales-input {
            width: 100%;
            min-height: 100px;
            padding: 15px;
            border: 2px solid var(--warning-color);
            border-radius: 8px;
            font-size: 14px;
            line-height: 1.5;
            background: white;
            transition: all 0.3s ease;
            font-family: 'Poppins', sans-serif;
        }

        .saberes-manuales-input:focus {
            border-color: var(--primary-color);
            outline: none;
            box-shadow: 0 0 0 3px rgba(255, 193, 7, 0.1);
        }

        .saberes-manuales-lista {
            margin-top: 15px;
            padding: 15px;
            background: white;
            border-radius: 8px;
            border: 1px solid var(--border-color);
            max-height: 200px;
            overflow-y: auto;
        }

        /* ===== FOOTER ===== */
        .footer {
            text-align: center;
            margin-top: 30px;
            font-weight: bold;
            color: var(--primary-color);
            padding: 25px;
            border-top: 3px solid var(--primary-color);
            background: var(--light-purple);
            border-radius: 8px;
        }

        /* ===== UTILIDADES ===== */
        small {
            color: #666;
            font-size: 12px;
            display: block;
            margin-top: 8px;
        }

        /* ===== MODAL PARA GUARDADO MEJORADO ===== */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            backdrop-filter: blur(5px);
        }

        .modal-content {
            background-color: white;
            margin: 10% auto;
            padding: 30px;
            border-radius: 12px;
            width: 90%;
            max-width: 600px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        .modal h3 {
            color: var(--primary-color);
            margin-bottom: 20px;
        }

        .plan-list {
            max-height: 300px;
            overflow-y: auto;
            margin: 15px 0;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 10px;
        }

        .plan-item {
            padding: 12px;
            margin: 8px 0;
            background: #f8f9fa;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
            border-left: 4px solid var(--primary-color);
        }

        .plan-item:hover {
            background: var(--light-purple);
            transform: translateX(5px);
        }

        .plan-item.selected {
            background: var(--light-purple);
            border-left-color: var(--success-color);
        }

        .plan-details {
            display: flex;
            justify-content: space-between;
            margin-top: 5px;
            font-size: 12px;
            color: #666;
        }

        /* ===== EJES TRANSVERSALES MULTIPLES MEJORADOS ===== */
        .ejes-transversales {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 15px;
            margin: 15px 0;
        }

        .eje-option {
            padding: 15px;
            background: white;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .eje-option:hover {
            border-color: var(--primary-color);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .eje-option.selected {
            border-color: var(--primary-color);
            background: var(--light-purple);
        }

        /* ===== RESPONSIVE DESIGN ===== */
        @media (max-width: 1200px) {
            .container {
                width: 95%;
                min-width: auto;
                padding: 25px;
            }
        }

        @media (max-width: 768px) {
            body {
                padding: 10px;
            }
            
            .container {
                padding: 20px;
            }
            
            .action-buttons {
                flex-direction: column;
                gap: 10px;
            }
            
            .semana-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }
            
            .semanas-controls {
                flex-direction: column;
                gap: 15px;
                text-align: center;
            }
            
            .ejes-transversales {
                grid-template-columns: 1fr;
            }
            
            .semana-content {
                grid-template-columns: 1fr;
                gap: 10px;
            }
        }

        /* ===== IMPRESI√ìN OPTIMIZADA - SOLUCI√ìN DEFINITIVA MEJORADA ===== */
        @media print {
            body {
                background: white !important;
                padding: 0 !important;
                margin: 0 !important;
                font-size: 12px !important;
                font-family: 'Poppins', sans-serif !important;
                line-height: 1.4 !important;
                color: black !important;
            }
            
            .container {
                width: 100% !important;
                max-width: 100% !important;
                min-width: auto !important;
                box-shadow: none !important;
                padding: 10px !important;
                margin: 0 !important;
                border: none !important;
                border-radius: 0 !important;
            }
            
            /* Ocultar elementos no necesarios en impresi√≥n */
            .action-buttons, 
            .copilot-btn, 
            .btn-agregar-semana, 
            .btn-eliminar-semana,
            .modal,
            .semanas-controls,
            .btn,
            .expand-btn {
                display: none !important;
            }
            
            /* Semanas - mantener estructura pero optimizar para impresi√≥n */
            .semana-item {
                border: 1px solid #000 !important;
                page-break-inside: avoid !important;
                margin-bottom: 15px !important;
                padding: 15px !important;
                break-inside: avoid !important;
                box-shadow: none !important;
                background: white !important;
                min-height: auto !important;
                max-height: none !important;
                height: auto !important;
            }
            
            /* Mantener estructura de 3 columnas en impresi√≥n */
            .semana-content {
                display: grid !important;
                grid-template-columns: 1fr 1fr 1fr !important;
                gap: 8px !important;
                page-break-inside: avoid !important;
                margin-bottom: 10px !important;
            }
            
            .semana-col {
                margin-bottom: 0 !important;
                page-break-inside: avoid !important;
                min-height: auto !important;
                break-inside: avoid !important;
                height: auto !important;
            }
            
            .semana-col-title {
                background: #f0f0f0 !important;
                color: black !important;
                border: 1px solid #ccc !important;
                margin-bottom: 5px !important;
                font-size: 11px !important;
                padding: 6px !important;
            }
            
            /* ===== SOLUCI√ìN DEFINITIVA MEJORADA: CONTENEDORES EDITABLES EN IMPRESI√ìN ===== */
            .contenedor-editable {
                /* ELIMINAR TODAS LAS RESTRICCIONES */
                min-height: auto !important;
                height: auto !important;
                max-height: none !important;
                
                /* PERMITIR EXPANSI√ìN COMPLETA */
                overflow: visible !important;
                overflow-y: visible !important;
                overflow-x: visible !important;
                
                /* GARANTIZAR VISIBILIDAD */
                display: block !important;
                visibility: visible !important;
                opacity: 1 !important;
                
                /* FORMATO DE TEXTO COMPLETO - MEJORADO PARA BULLETS */
                white-space: pre-wrap !important;
                white-space: -moz-pre-wrap !important;
                white-space: -pre-wrap !important;
                white-space: -o-pre-wrap !important;
                word-wrap: break-word !important;
                word-break: break-word !important;
                overflow-wrap: break-word !important;
                
                /* ESTILOS DE IMPRESI√ìN MEJORADOS */
                font-size: 11px !important;
                line-height: 1.3 !important;
                border: 1px solid #ccc !important;
                background: white !important;
                padding: 8px !important;
                
                /* EXPANSI√ìN NATURAL */
                page-break-inside: auto !important;
                break-inside: auto !important;
                
                /* ELIMINAR SCROLL Y RESIZE */
                resize: none !important;
                
                /* CONTENEDOR FLEXIBLE */
                display: block !important;
                width: 100% !important;
                box-sizing: border-box !important;
            }

            /* Estilos espec√≠ficos para listas y bullets en impresi√≥n */
            .contenedor-editable ul,
            .contenedor-editable ol {
                margin: 3px 0 !important;
                padding-left: 15px !important;
            }

            .contenedor-editable li {
                margin-bottom: 2px !important;
                page-break-inside: avoid !important;
                line-height: 1.2 !important;
            }

            /* Asegurar que NO haya l√≠mites de altura en las columnas */
            .semana-col {
                height: auto !important;
                min-height: auto !important;
                max-height: none !important;
            }

            /* Permitir que el contenido fluya naturalmente */
            .semana-item {
                height: auto !important;
                min-height: auto !important;
            }

            /* ===== CHECKBOXES VISIBLES ===== */
            input[type="checkbox"] {
                display: none !important;
            }
            
            .saberes-options input[type="checkbox"]:checked + span::before,
            .checkbox-group input[type="checkbox"]:checked + span::before,
            .eje-option input[type="checkbox"]:checked + span::before,
            .saber-item input[type="checkbox"]:checked + span::before {
                content: "‚úì " !important;
                font-weight: bold !important;
                color: black !important;
                margin-right: 5px !important;
            }
            
            .saberes-options input[type="checkbox"]:checked + span,
            .checkbox-group input[type="checkbox"]:checked + span,
            .eje-option input[type="checkbox"]:checked + span,
            .saber-item input[type="checkbox"]:checked + span {
                background: #f0f0f0 !important;
                padding: 2px 4px !important;
                border-radius: 2px !important;
                display: inline-block !important;
            }
            
            .saberes-options label,
            .checkbox-group label {
                display: block !important;
                margin-bottom: 2px !important;
                font-size: 11px !important;
            }
            
            /* RdA - asegurar que no se corte */
            .rda-container {
                min-height: auto !important;
                max-height: none !important;
                overflow: visible !important;
                border: 1px solid #ccc !important;
                background: white !important;
                page-break-inside: avoid !important;
                padding: 8px !important;
            }
            
            .rda-item {
                page-break-inside: avoid !important;
                break-inside: avoid !important;
                margin-bottom: 8px !important;
                border: 1px solid #eee !important;
                font-size: 11px !important;
                padding: 8px !important;
            }
            
            /* Saberes */
            .saberes-options,
            .saberes-semana-opciones {
                max-height: none !important;
                overflow: visible !important;
                height: auto !important;
                border: 1px solid #ccc !important;
                background: white !important;
                padding: 8px !important;
            }
            
            /* Evitar cortes de texto en todos los elementos */
            table, .semana-item, .area-saberes, .rda-item,
            .saberes-semana-container, .semana-col {
                page-break-inside: avoid !important;
                break-inside: avoid !important;
            }
            
            .header {
                page-break-after: avoid !important;
            }
            
            /* Mejorar espaciado para impresi√≥n */
            .section-title {
                margin: 8px 0 !important;
                padding: 6px 12px !important;
                background: #f0f0f0 !important;
                color: black !important;
                border: 1px solid #ccc !important;
                font-size: 11px !important;
            }
            
            /* Asegurar que los elementos se muestren correctamente */
            .saber-item {
                border: none !important;
                background: white !important;
                padding: 1px 0 !important;
                font-size: 11px !important;
                display: block !important;
            }
            
            .eje-option {
                border: 1px solid #ccc !important;
                background: white !important;
                margin-bottom: 3px !important;
                padding: 6px !important;
                font-size: 11px !important;
            }
            
            .areas-options label {
                border: none !important;
                background: white !important;
                padding: 1px 0 !important;
                font-size: 11px !important;
            }
            
            .saberes-options label {
                border: none !important;
                background: white !important;
                padding: 1px 0 !important;
                font-size: 11px !important;
            }
            
            /* Footer de impresi√≥n */
            .footer {
                border-top: 2px solid #000 !important;
                background: white !important;
                color: black !important;
                margin-top: 15px !important;
                font-size: 11px !important;
                padding: 15px !important;
            }
            
            /* Eliminar efectos visuales */
            .semana-item:hover {
                transform: none !important;
                box-shadow: none !important;
            }
            
            /* Asegurar que las semanas no se corten entre p√°ginas */
            .semana-item {
                break-inside: avoid !important;
                page-break-inside: avoid !important;
            }
            
            /* PERMITIR que las estrategias de mediaci√≥n se expandan naturalmente */
            .semana-content {
                page-break-inside: avoid !important;
            }
            
            /* Reducir m√°rgenes para optimizar espacio */
            @page {
                margin: 0.3cm;
            }

            /* Optimizar tablas para impresi√≥n */
            table {
                margin-bottom: 10px !important;
            }
            
            td {
                padding: 6px !important;
                font-size: 11px !important;
            }
        }

        /* ===== SCROLLBAR PERSONALIZADO ===== */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb {
            background: var(--primary-color);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--secondary-color);
        }

        /* ===== COPILOT MODAL ===== */
        .copilot-modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.7);
        }

        .copilot-content {
            background-color: white;
            margin: 5% auto;
            padding: 30px;
            border-radius: 12px;
            width: 90%;
            max-width: 800px;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        .copilot-prompt {
            width: 100%;
            min-height: 150px;
            padding: 15px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            margin-bottom: 15px;
            font-family: 'Poppins', sans-serif;
            font-size: 14px;
        }

        .copilot-response {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            border: 1px solid var(--border-color);
            min-height: 100px;
            margin-top: 15px;
            font-family: 'Poppins', sans-serif;
        }

        /* ===== INDICADORES DE LOGRO MEJORADOS ===== */
        .indicadores-lista {
            margin: 0;
            padding-left: 20px;
        }

        .indicadores-lista li {
            margin-bottom: 8px;
            line-height: 1.4;
            padding-left: 5px;
        }

        .indicadores-lista li:last-child {
            margin-bottom: 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Encabezado -->
        <div class="header">
            <h1>Plantilla de Planeamiento Did√°ctico</h1>
            <h2>Programa Nacional de Formaci√≥n Tecnol√≥gica</h2>
            <div class="year">2026</div>
        </div>

        <!-- Informaci√≥n General -->
        <table>
            <tr>
                <td width="33%">
                    <strong>Direcci√≥n Regional de Educaci√≥n:</strong><br>
                    <input type="text" id="direccionRegional" placeholder="Seleccionar" class="input-field">
                </td>
                <td width="33%">
                    <strong>Centro educativo:</strong><br>
                    <input type="text" id="centroEducativo" placeholder="Seleccionar" class="input-field">
                </td>
                <td width="34%">
                    <strong>C√≥digo:</strong><br>
                    <input type="text" id="codigoCentro" class="input-field">
                </td>
            </tr>
            <tr>
                <td>
                    <strong>Nombre de la persona docente:</strong><br>
                    <input type="text" id="nombreDocente" class="input-field">
                </td>
                <td colspan="2">
                    <strong>Asignatura: Formaci√≥n tecnol√≥gica/Inform√°tica educativa</strong><br>
                    <strong>Curso lectivo:</strong> 2026
                </td>
            </tr>
            <tr>
                <td>
                    <strong>Ciclo:</strong><br>
                    <select id="ciclo" class="select-field">
                        <option value="">Seleccionar</option>
                        <option value="Preescolar">Preescolar</option>
                        <option value="I Ciclo">I Ciclo</option>
                        <option value="II Ciclo">II Ciclo</option>
                        <option value="III Ciclo">III Ciclo</option>
                    </select>
                </td>
                <td>
                    <strong>Nivel:</strong><br>
                    <select id="nivel" class="select-field">
                        <option value="">Seleccionar</option>
                        <option value="Preescolar">Preescolar</option>
                        <option value="1¬∞">1¬∞</option>
                        <option value="2¬∞">2¬∞</option>
                        <option value="3¬∞">3¬∞</option>
                        <option value="4¬∞">4¬∞</option>
                        <option value="5¬∞">5¬∞</option>
                        <option value="6¬∞">6¬∞</option>
                        <option value="7¬∞">7¬∞</option>
                        <option value="8¬∞">8¬∞</option>
                        <option value="9¬∞">9¬∞</option>
                    </select>
                </td>
                <td>
                    <strong>Lecciones planificadas:</strong><br>
                    <input type="number" id="leccionesPlanificadas" min="1" max="40" value="8" class="input-field">
                </td>
            </tr>
            <tr>
                <td colspan="3">
                    <strong>Mes inicio:</strong> <input type="text" id="mesInicio" class="small-input">
                    <strong>Mes final:</strong> <input type="text" id="mesFinal" class="small-input">
                    <br>
                    <strong>Periodicidad:</strong>
                    <span class="checkbox-group">
                        <label><input type="radio" name="periodicidad" value="mes"> <span>mes</span></label>
                        <label><input type="radio" name="periodicidad" value="bimestre" checked> <span>bimestre</span></label>
                        <label><input type="radio" name="periodicidad" value="trimestre"> <span>trimestre</span></label>
                        <label><input type="radio" name="periodicidad" value="semestre"> <span>semestre</span></label>
                    </span>
                </td>
            </tr>
        </table>

        <!-- Ejes Transversales M√∫ltiples -->
        <div class="section-title">
            Ejes transversales del PNFT seg√∫n competencia MEP, marque con equis (x) <strong>todos los ejes</strong> a desarrollar.
        </div>
        <div class="ejes-transversales">
            <div class="eje-option">
                <label>
                    <input type="checkbox" name="eje" value="ciudadania">
                    <span><strong>Ciudadan√≠a y √©tica digital</strong><br>
                    <small>Competencias para la ciudadan√≠a responsable y solidaria</small></span>
                </label>
            </div>
            <div class="eje-option">
                <label>
                    <input type="checkbox" name="eje" value="pensamiento">
                    <span><strong>Pensamiento computacional para la resoluci√≥n de problemas</strong><br>
                    <small>Competencias para la vida</small></span>
                </label>
            </div>
            <div class="eje-option">
                <label>
                    <input type="checkbox" name="eje" value="emprendimiento">
                    <span><strong>Emprendimiento e Innovaci√≥n</strong><br>
                    <small>Competencias para el empleo digno</small></span>
                </label>
            </div>
        </div>

        <!-- Metodolog√≠a Activa -->
        <div class="section-title">Metodolog√≠a activa:</div>
        <select id="metodologiaActiva" class="select-field">
            <option value="">Seleccionar metodolog√≠a</option>
            <option value="ABJ">Aprendizaje basado en juegos (ABJ)</option>
            <option value="ABR">Aprendizaje basado en retos (ABR)</option>
            <option value="design-thinking">Design thinking</option>
            <option value="otra">Otra: Especifique</option>
        </select>
        <input type="text" id="metodologiaOtra" placeholder="Especifique la metodolog√≠a" class="input-field" style="display: none; margin-top: 5px;">

        <!-- √Årea de Conocimiento y RdA -->
        <table>
            <tr>
                <td width="50%" class="section-title">√Årea de conocimiento</td>
                <td width="50%" class="section-title">RdA:</td>
            </tr>
            <tr>
                <td>
                    <div class="checkbox-group">
                        <label><input type="checkbox" name="area" value="apropiacion"> <span>Apropiaci√≥n Tecnol√≥gica y Digital</span></label>
                        <label><input type="checkbox" name="area" value="programacion"> <span>Programaci√≥n y Algoritmos</span></label>
                        <label><input type="checkbox" name="area" value="robotica"> <span>Computaci√≥n f√≠sica y rob√≥tica</span></label>
                        <label><input type="checkbox" name="area" value="ciencia"> <span>Ciencia de datos e Inteligencia Artificial</span></label>
                    </div>
                </td>
                <td>
                    <div id="rdaContainer" class="rda-container">
                        <div class="saberes-info">Seleccione un nivel y al menos un √°rea de conocimiento</div>
                    </div>
                </td>
            </tr>
        </table>

        <!-- Saberes Conceptuales, Procedimentales y Actitudinales -->
        <table class="saberes-table">
            <tr>
                <td width="33%" class="section-title">Saberes conceptuales (saber)</td>
                <td width="33%" class="section-title">Saberes procedimentales (saber hacer)</td>
                <td width="34%" class="section-title">Saberes actitudinales (saber ser)</td>
            </tr>
            <tr>
                <td>
                    <div id="saberesConceptualesContainer">
                        <div class="saberes-info">Seleccione nivel y al menos un √°rea de conocimiento</div>
                    </div>
                    <!-- Campo para saberes manuales -->
                    <div class="saberes-manuales-container">
                        <strong>O escriba sus saberes conceptuales manualmente:</strong><br>
                        <textarea class="saberes-manuales-input" id="saberesManuales" placeholder="Ej: Hardware; Software; Internet; Redes... (Separe con punto y coma)"></textarea>
                        <small>Separe cada saber con punto y coma (;)</small>
                    </div>
                </td>
                <td>
                    <div class="saberes-options">
                        <label><input type="checkbox" name="procedimental" value="reconoce"> <span>‚ö† Reconoce patrones.</span></label>
                        <label><input type="checkbox" name="procedimental" value="abstrae"> <span>‚ö† Abstrae.</span></label>
                        <label><input type="checkbox" name="procedimental" value="generaliza"> <span>‚ö† Generaliza.</span></label>
                        <label><input type="checkbox" name="procedimental" value="transfiere"> <span>‚ö† Transfiere.</span></label>
                        <label><input type="checkbox" name="procedimental" value="modulariza"> <span>‚ö† Modulariza.</span></label>
                        <label><input type="checkbox" name="procedimental" value="formula"> <span>‚ö† Formula algoritmos.</span></label>
                        <label><input type="checkbox" name="procedimental" value="remezcla"> <span>‚ö† Remezcla.</span></label>
                        <label><input type="checkbox" name="procedimental" value="depura"> <span>‚ö† Depura.</span></label>
                        <label><input type="checkbox" name="procedimental" value="programa"> <span>‚ö† Programa.</span></label>
                        <label><input type="checkbox" name="procedimental" value="comunica"> <span>‚ö† Comunica.</span></label>
                        <label><input type="checkbox" name="procedimental" value="colabora"> <span>‚ö† Colabora.</span></label>
                        <label><input type="checkbox" name="procedimental" value="piensa"> <span>‚ö† Piensa de forma creativa.</span></label>
                        <label><input type="checkbox" name="procedimental" value="maneja"> <span>‚ö† Maneja las tecnolog√≠as de forma √©tica y segura.</span></label>
                    </div>
                </td>
                <td>
                    <div class="saberes-options">
                        <label><input type="checkbox" name="actitudinal" value="gusto"> <span>‚ö† Gusto por la precisi√≥n.</span></label>
                        <label><input type="checkbox" name="actitudinal" value="aprender"> <span>‚ö† Aprender del error.</span></label>
                        <label><input type="checkbox" name="actitudinal" value="flexibilidad"> <span>‚ö† Flexibilidad para manejar problemas.</span></label>
                        <label><input type="checkbox" name="actitudinal" value="tolerancia"> <span>‚ö† Tolerancia a la frustraci√≥n.</span></label>
                    </div>
                </td>
            </tr>
        </table>

        <!-- Sistema de Semanas Din√°mico -->
        <div class="section-title">Planificaci√≥n por Semanas</div>
        <div class="semanas-controls">
            <div>
                <strong>Lecciones totales: <span id="totalLecciones">8</span></strong> | 
                <strong>Semanas generadas: <span id="totalSemanas">2</span></strong>
            </div>
            <button type="button" class="btn-agregar-semana" onclick="agregarSemanaManual()">+ Agregar Semana</button>
        </div>
        
        <div id="semanasContainer">
            <!-- Las semanas se generar√°n autom√°ticamente aqu√≠ -->
        </div>

        <!-- Reflexiones Docentes -->
        <table>
            <tr>
                <td width="33%" class="section-title">¬øQu√© funcion√≥?</td>
                <td width="33%" class="section-title">¬øQu√© no funcion√≥?</td>
                <td width="34%" class="section-title">¬øQu√© puedo mejorar?</td>
            </tr>
            <tr>
                <td><textarea id="queFunciono" class="textarea-field" placeholder="Describa las estrategias que funcionaron bien..."></textarea></td>
                <td><textarea id="queNoFunciono" class="textarea-field" placeholder="Describa las dificultades encontradas..."></textarea></td>
                <td><textarea id="queMejorar" class="textarea-field" placeholder="Describa las mejoras para pr√≥ximas clases..."></textarea></td>
            </tr>
        </table>

        <!-- Observaciones -->
        <div class="section-title">Observaciones y/o recomendaciones did√°cticas por nivel:</div>
        <textarea id="observaciones" class="textarea-field full-width" placeholder="Observaciones generales sobre el desarrollo de las clases..."></textarea>

        <!-- Footer -->
        <div class="footer">
            PROGRAMA NACIONAL DE FORMACI√ìN TECNOL√ìGICA<br>
            Direcci√≥n de Recursos Tecnol√≥gicos en Educaci√≥n
            <br>Creado por: Asesor Nacional <strong>MSc. Kevin S√°nchez Bogar√≠n</strong>
        </div>

        <!-- Botones de Acci√≥n -->
        <div class="action-buttons">
            <button onclick="guardarPlan()" class="btn btn-primary">üíæ Guardar Plan</button>
            <button onclick="cargarPlan()" class="btn btn-secondary">üìÇ Cargar Plan</button>
            <button onclick="exportarPlan()" class="btn btn-outline">üíæ Exportar a Archivo</button>
            <button onclick="importarPlan()" class="btn btn-outline">üìÇ Importar Archivo</button>
            <button onclick="exportarPDF()" class="btn btn-secondary">üìÑ Exportar a PDF</button>
            <button onclick="nuevoPlan()" class="btn btn-outline">üÜï Nuevo Plan</button>
        </div>
    </div>

    <!-- Modales -->
    <div id="guardarModal" class="modal">
        <div class="modal-content">
            <h3>üíæ Guardar Plan</h3>
            <input type="text" id="nombrePlan" placeholder="Ej: 1¬∞ Matem√°ticas - Bimestre 1" class="input-field" style="margin-bottom: 15px;">
            <button onclick="confirmarGuardar()" class="btn btn-primary" style="width: 100%;">‚úÖ Guardar Plan</button>
            <button onclick="cerrarModal()" class="btn btn-outline" style="width: 100%; margin-top: 10px;">‚ùå Cancelar</button>
        </div>
    </div>

    <div id="cargarModal" class="modal">
        <div class="modal-content">
            <h3>üìÇ Cargar Plan</h3>
            <div class="plan-list" id="listaPlanes">
                <div class="saberes-info" id="sinPlanesMsg">No hay planes guardados</div>
            </div>
            <button onclick="confirmarCargar()" class="btn btn-primary" style="width: 100%;">‚úÖ Cargar Plan Seleccionado</button>
            <button onclick="cerrarModal()" class="btn btn-outline" style="width: 100%; margin-top: 10px;">‚ùå Cancelar</button>
        </div>
    </div>

    <script>
        // ===== BASE DE DATOS COMPLETA PNFT =====
        const PNFT_DATA = {
          "Preescolar": {
            "Apropiaci√≥n tecnol√≥gica y Digital": {
              saberes: [
                { nombre: "Computadora", indicadores: ["Identificar qu√© es una computadora y algunas de sus caracter√≠sticas, a partir de experiencias pr√°cticas de interacci√≥n con dispositivos digitales."] },
                { nombre: "Software", indicadores: ["Reconocer elementos visuales b√°sicos de la interfaz de software (iconos, botones, ventanas), interactuando con ellos mediante el uso guiado de dispositivos digitales."] },
                { nombre: "Herramientas de creaci√≥n de contenido multimedia", indicadores: ["Reconocer las herramientas de creaci√≥n de contenido multimedia seg√∫n su utilidad: editor gr√°fico, grabadora de audio y video, en la creaci√≥n de recursos digitales."] },
                { nombre: "Hardware", indicadores: ["Reconocer componentes b√°sicos del hardware, como dispositivos de entrada y salida de datos, explorando su funci√≥n al encender, usar o interactuar con la computadora en actividades cotidianas."] },
                { nombre: "Internet", indicadores: ["Reconocer qu√© es Internet y los requerimientos de un dispositivo para conectarse a Internet, realizando una exploraci√≥n dirigida."] },
                { nombre: "Conexi√≥n entre dispositivos", indicadores: ["Reconocer la conexi√≥n entre dispositivos por bluetooth y los requerimientos de dispositivos digitales para conectarse, a trav√©s de una exploraci√≥n dirigida."] }
              ]
            },
            "Programaci√≥n y Algoritmos": {
              saberes: [
                { nombre: "Entorno de programaci√≥n iconogr√°fico", indicadores: ["Reconocer el entorno de programaci√≥n iconogr√°fico, interactuando con bloques de la interfaz, como desplazamiento, apariencia o sonido, mediante el uso guiado del docente."] },
                { nombre: "Lateralidad y orientaci√≥n espacial", indicadores: ["Reconocer los conceptos de lateralidad y orientaci√≥n espacial en la construcci√≥n de secuencias de acciones para la soluci√≥n de retos de programaci√≥n."] },
                { nombre: "Evento", indicadores: ["Reconocer que un evento desencadena una acci√≥n, identificando la relaci√≥n de causa y efecto en juegos o actividades."] },
                { nombre: "Estado", indicadores: ["Reconocer el concepto de estado programando objetos que modifican las propiedades de orientaci√≥n y/o direcci√≥n."] },
                { nombre: "Algoritmo", indicadores: ["Reconocer el concepto de algoritmo mediante secuencias de acciones l√≥gicas y ordenadas, en la construcci√≥n de soluciones a desaf√≠os propuestos."] },
                { nombre: "Dato", indicadores: ["Reconocer la importancia del dato en contexto f√≠sico y en contexto digital mientras soluciona desaf√≠os propuestos."] },
                { nombre: "Estructuras repetitivas", indicadores: ["Reconocer estructuras repetitivas en secuencias de acciones durante la programaci√≥n guiada de objetos digitales, distinguiendo si una acci√≥n se repite un n√∫mero limitado o ilimitado de veces."] }
              ]
            },
            "Computaci√≥n f√≠sica y Rob√≥tica": {
              saberes: [
                { nombre: "Robot", indicadores: ["Reconocer qu√© es un robot, sus componentes y algunos de sus usos, mediante actividades l√∫dicas de exploraci√≥n o programaci√≥n guiada."] }
              ]
            },
            "Ciencia de datos e Inteligencia Artificial": {
              saberes: [
                { nombre: "Dato", indicadores: ["Identificar el dato y su importancia en situaciones cotidianas, reconociendo diferentes tipos como texto, imagen, sonido o video."] },
                { nombre: "Estrategias para presentar datos", indicadores: ["Reconocer gr√°ficos pict√≥ricos como estrategia para representar datos recolectados en actividades l√∫dicas."] },
                { nombre: "Visualizaci√≥n de datos", indicadores: ["Interpretar gr√°ficos pict√≥ricos como parte de la visualizaci√≥n de datos (colores, formas, cantidades), con apoyo del docente, relacion√°ndolos con datos conocidos del entorno."] },
                { nombre: "Realidad aumentada", indicadores: ["Experimentar con realidad aumentada en entornos f√≠sicos mediante actividades sensoriales y l√∫dicas, con acompa√±amiento del docente."] }
              ]
            }
          },
          "1¬∞": {
            "Apropiaci√≥n tecnol√≥gica y Digital": {
              saberes: [
                { nombre: "Computadora", indicadores: ["Reconocer la computadora como una herramienta tecnol√≥gica, identificando sus caracter√≠sticas b√°sicas, funciones e importancia en la vida cotidiana, por medio de la observaci√≥n y manipulaci√≥n pr√°ctica."] },
                { nombre: "Hardware", indicadores: ["Identificar el hardware b√°sico de una computadora, reconociendo dispositivos de entrada, salida y las acciones de encendido y apagado, mediante actividades pr√°cticas guiadas."] },
                { nombre: "Software", indicadores: ["Identificar el software de una computadora, reconociendo los elementos b√°sicos de la interfaz de usuario mediante actividades pr√°cticas guiadas."] },
                { nombre: "Conexi√≥n entre dispositivos (bluetooth)", indicadores: ["Reconocer el bluetooth como medio de conexi√≥n entre dispositivos utilizando dispositivos digitales en el aula."] },
                { nombre: "Herramientas de creaci√≥n de contenido multimedia (audio, im√°genes)", indicadores: ["Utilizar herramientas de creaci√≥n de contenido multimedia para la creaci√≥n de audios e incorporaci√≥n de im√°genes en productos digitales."] },
                { nombre: "Internet", indicadores: ["Reconocer los dispositivos y programas que permiten la conexi√≥n para la navegaci√≥n en Internet."] }
              ]
            },
            "Programaci√≥n y Algoritmos": {
              saberes: [
                { nombre: "Entorno de programaci√≥n iconogr√°fico", indicadores: ["Reconocer elementos b√°sicos de un entorno de programaci√≥n iconogr√°fico, como bloques de desplazamiento, orientaci√≥n, apariencia, sonido, eventos y control, mediante la navegaci√≥n en la interfaz con actividades guiadas."] },
                { nombre: "Reconocimiento de patrones", indicadores: ["Reconocer patrones de movimiento en secuencias de instrucciones simples para que un personaje siga una ruta desde un punto de inicio hasta un punto de llegada."] },
                { nombre: "Estado", indicadores: ["Reconocer el estado de un objeto digital en relaci√≥n con su orientaci√≥n, direcci√≥n y tama√±o, identificando variaciones en dichos atributos, mediante secuencias de programaciones simples."] },
                { nombre: "Algoritmo", indicadores: ["Identificar un algoritmo en situaciones de la vida diaria, reconociendo secuencias l√≥gicas y ordenadas de acciones, para ser representadas de forma anal√≥gica (dibujos, tarjetas, gestos) y/o digital (entorno iconogr√°fico)."] },
                { nombre: "Dato", indicadores: ["Identificar el dato en situaciones de la vida diaria, reconociendo informaci√≥n valiosa en contextos f√≠sicos (como etiquetas, se√±ales, objetos) y digitales (como im√°genes, √≠conos o pantallas interactivas)."] },
                { nombre: "Estructuras repetitivas", indicadores: ["Reconocer estructuras repetitivas al identificar ciclos finitos (como una canci√≥n o rutina) e infinitos (como el tic-tac del reloj o el movimiento del ventilador) en situaciones de la vida diaria."] },
                { nombre: "Evento", indicadores: ["Reconocer el evento como relaci√≥n de causa y efecto al participar en juegos anal√≥gicos, identificando c√≥mo una acci√≥n provoca una respuesta o cambio observable durante la din√°mica."] }
              ]
            },
            "Ciencia de datos e Inteligencia Artificial": {
              saberes: [
                { nombre: "Fundamentos de la IA", indicadores: ["Reconocer los fundamentos de la inteligencia artificial a trav√©s de objetos o situaciones del entorno donde esta tecnolog√≠a est√° presente, mediante actividades guiadas con apoyo visual o audiovisual."] },
                { nombre: "Asistentes virtuales", indicadores: ["Reconocer qu√© es un asistente virtual y sus funciones a partir de demostraciones guiadas o videos educativos."] }
              ]
            }
          },
          "2¬∞": {
            "Apropiaci√≥n tecnol√≥gica y Digital": {
              saberes: [
                { nombre: "Hardware", indicadores: ["Identificar el funcionamiento de los componentes b√°sicos del hardware, reconociendo c√≥mo cuidarlos mientras utilizan la computadora en la cotidianidad."] },
                { nombre: "Software (programas)", indicadores: ["Explorar el funcionamiento de diferentes programas de software seg√∫n la tarea escolar asignada durante el trabajo en aula."] },
                { nombre: "Conexi√≥n entre dispositivos", indicadores: ["Reconocer el wifi como medio de conexi√≥n entre dispositivos conectando dispositivos digitales en el aula."] },
                { nombre: "Herramienta de productividad (procesador de texto)", indicadores: ["Utilizar herramientas de productividad como el procesador de texto, reconociendo la cinta de opciones, pesta√±as y comandos b√°sicos, as√≠ como sus funciones por teclado, durante la creaci√≥n de textos sencillos."] },
                { nombre: "Herramientas de creaci√≥n de contenido multimedia (grabadora de audio y editores de gr√°ficos)", indicadores: ["Utilizar herramientas de creaci√≥n de contenido multimedia, como la grabadora de audio y editores de gr√°ficos, aplicando funciones b√°sicas como crear, editar y guardar archivos, durante actividades guiadas de producci√≥n digital en el aula."] },
                { nombre: "Internet", indicadores: ["Aplicar normas b√°sicas de navegaci√≥n por internet, para acceder a p√°ginas educativas seguras, bajo acompa√±amiento del docente."] }
              ]
            },
            "Programaci√≥n y Algoritmos": {
              saberes: [
                { nombre: "Entorno de programaci√≥n por bloques", indicadores: ["Aplicar el uso del entorno de programaci√≥n por bloques, explorando la interfaz y el √°rea de bloques mientras construye secuencias de acciones que representen historias cotidianas."] },
                { nombre: "Algoritmo", indicadores: ["Dise√±ar un algoritmo en lenguaje natural como una secuencia ordenada que resuelve situaciones de la vida cotidiana."] },
                { nombre: "Dato", indicadores: ["Clasificar el dato como num√©rico o de texto en ejemplos de la vida cotidiana, valorando su uso en actividades del entorno cercano."] },
                { nombre: "Variable", indicadores: ["Identificar una variable en contextos de la vida cotidiana, observando elementos que cambian en relaci√≥n con otros (como edad, cantidad, clima o tiempo de actividad)."] },
                { nombre: "Estructuras repetitivas", indicadores: ["Identificar estructuras repetitivas en actividades programadas, diferenciando entre ciclos finitos e infinitos seg√∫n la cantidad de repeticiones requeridas."] },
                { nombre: "Estructuras condicionales", indicadores: ["Aplicar estructuras condicionales simples en un entorno de programaci√≥n por bloques en la resoluci√≥n de un ejercicio programado."] },
                { nombre: "Operadores aritm√©ticos", indicadores: ["Reconocer los operadores aritm√©ticos de suma y resta en situaciones de la vida cotidiana y su uso en un entorno de programaci√≥n por bloques."] },
                { nombre: "Operador relacional", indicadores: ["Reconocer el operador relacional \"igual que\" en situaciones de la vida cotidiana y su uso en un entorno de programaci√≥n por bloques."] },
                { nombre: "Evento", indicadores: ["Reconocer el evento en un entorno de programaci√≥n por bloques que activa una acci√≥n o cambio visible en un objeto del programa."] }
              ]
            },
            "Ciencia de datos e Inteligencia Artificial": {
              saberes: [
                { nombre: "Fundamentos de la IA", indicadores: ["Describir los fundamentos de la inteligencia artificial en situaciones cotidianas, utilizando ejemplos guiados y preguntas orientadoras."] },
                { nombre: "Asistentes virtuales", indicadores: ["Reconocer el uso de asistentes virtuales en situaciones cotidianas, mediante ejemplos guiados que permitan la interacci√≥n."] }
              ]
            }
          },
          "3¬∞": {
            "Apropiaci√≥n tecnol√≥gica y Digital": {
              saberes: [
                { nombre: "Hardware", indicadores: ["Explicar las funciones b√°sicas del hardware (entrada, procesamiento, almacenamiento y salida), en actividades pr√°cticas con dispositivos computacionales en el aula."] },
                { nombre: "Redes de comunicaci√≥n", indicadores: ["Describir qu√© son las redes de comunicaci√≥n y c√≥mo funciona una red local, a partir de la observaci√≥n y la pr√°ctica de intercambio de informaci√≥n entre dispositivos conectados en el aula."] },
                { nombre: "Gesti√≥n de archivos", indicadores: ["Reconocer la gesti√≥n de archivos como proceso para la organizaci√≥n y clasificaci√≥n de la informaci√≥n, mediante el uso de carpetas, subcarpetas y la exploraci√≥n de archivos digitales."] },
                { nombre: "Herramienta de productividad (editor de presentaciones)", indicadores: ["Utilizar herramientas de productividad, como el editor de presentaciones, empleando la cinta de opciones, pesta√±as, comandos b√°sicos y sus funciones por teclado en la elaboraci√≥n de presentaciones digitales."] },
                { nombre: "Herramientas de creaci√≥n de contenido multimedia (video)", indicadores: ["Aplicar herramientas de creaci√≥n de contenido multimedia en la creaci√≥n, edici√≥n y guardado de videos, para incorporarlos en sus producciones."] },
                { nombre: "Navegador", indicadores: ["Identificar el navegador como una herramienta digital, reconociendo sus partes y usos en actividades de exploraci√≥n guiada por el docente."] },
                { nombre: "Buscador", indicadores: ["Identificar el buscador como una herramienta digital para acceder a informaci√≥n, distinguiendo sitios confiables y no confiables durante la exploraci√≥n dirigida en buscadores infantiles."] },
                { nombre: "Netiqueta", indicadores: ["Identificar normas b√°sicas de netiqueta que deben seguir al participar en diferentes procesos de comunicaci√≥n."] },
                { nombre: "Comunicaci√≥n y colaboraci√≥n sincr√≥nica y asincr√≥nica", indicadores: ["Identificar el correo electr√≥nico como una herramienta de comunicaci√≥n asincr√≥nica, reconociendo sus caracter√≠sticas y su uso en actividades digitales guiadas."] },
                { nombre: "Huella digital", indicadores: ["Reconocer qu√© es la huella digital y c√≥mo puede afectar su privacidad y seguridad en l√≠nea, identificando que sus acciones en Internet dejan rastros que deben cuidarse."] },
                { nombre: "Software malicioso", indicadores: ["Reconocer el virus inform√°tico como un tipo de software malicioso, explicando de forma sencilla sus consecuencias, como p√©rdida de informaci√≥n o mal funcionamiento en los dispositivos."] },
                { nombre: "Riesgo en l√≠nea", indicadores: ["Reconocer algunos riesgos en l√≠nea como los perfiles falsos, la p√©rdida de privacidad, el contacto con extra√±os y la adicci√≥n al uso de dispositivos, identificando medidas b√°sicas para protegerse en estas situaciones."] },
                { nombre: "Medidas de seguridad web", indicadores: ["Reconocer el control parental como una medida de seguridad web en el uso de Internet que protege frente a riesgos y limita el acceso a contenido inapropiado."] }
              ]
            },
            "Programaci√≥n y Algoritmos": {
              saberes: [
                { nombre: "Algoritmo", indicadores: ["Reconocer la estructura y caracter√≠sticas de un algoritmo en diferentes representaciones, valorando el orden, inicio-fin y l√≥gica de pasos en la soluci√≥n de situaciones cotidianas."] },
                { nombre: "Variable", indicadores: ["Utilizar la gesti√≥n de una variable en un entorno de programaci√≥n por bloques declarando su tipo, asignando valores y utilizando su contenido en la resoluci√≥n de un ejercicio programado."] },
                { nombre: "Operadores aritm√©ticos", indicadores: ["Utilizar operadores aritm√©ticos de multiplicaci√≥n y divisi√≥n y/o operadores relacionales como \"menor que\", \"mayor que\" o \"igual que\", en la resoluci√≥n de un ejercicio programado."] },
                { nombre: "Operadores relacionales", indicadores: ["Utilizar operadores aritm√©ticos de multiplicaci√≥n y divisi√≥n y/o operadores relacionales como \"menor que\", \"mayor que\" o \"igual que\", en la resoluci√≥n de un ejercicio programado."] }
              ]
            },
            "Ciencia de datos e Inteligencia Artificial": {
              saberes: [
                { nombre: "Desaf√≠os de la IA", indicadores: ["Identificar los desaf√≠os de la inteligencia artificial en la vida cotidiana y algunas recomendaciones para su uso seguro y responsable, con la ayuda de ejemplos guiados."] }
              ]
            }
          },
          "4¬∞": {
            "Apropiaci√≥n tecnol√≥gica y Digital": {
              saberes: [
                { nombre: "Hardware", indicadores: ["Clasificar componentes de hardware seg√∫n su funci√≥n, distinguiendo entre dispositivos computacionales y perif√©ricos en contextos cotidianos."] },
                { nombre: "Software", indicadores: ["Reconocer el software identificando sus tipos (de sistema, de aplicaci√≥n y utilitarios), valorando su funci√≥n en el uso cotidiano."] },
                { nombre: "Redes de comunicaci√≥n", indicadores: ["Reconocer las redes de comunicaci√≥n identificando la funcionalidad y aplicaci√≥n de una red local en el intercambio de informaci√≥n."] },
                { nombre: "Conexi√≥n entre dispositivos", indicadores: ["Reconocer la conexi√≥n entre dispositivos identificando si es f√≠sica (cableada) o inal√°mbrica (bluetooth, Wi-Fi)."] },
                { nombre: "Gesti√≥n de archivos", indicadores: ["Organizar archivos y carpetas, aplicando acciones b√°sicas como crear, mover, copiar, renombrar y eliminar."] },
                { nombre: "Herramienta de productividad (procesador de texto, editor de presentaciones)", indicadores: ["Utilizar herramientas de productividad en la creaci√≥n de contenidos que incluyan texto, im√°genes y formatos b√°sicos."] },
                { nombre: "Herramientas de creaci√≥n de contenido multimedia (Editor gr√°fico)", indicadores: ["Aplicar herramientas de creaci√≥n de contenido multimedia utilizando funciones b√°sicas de creaci√≥n, edici√≥n y guardado de im√°genes."] },
                { nombre: "Navegador", indicadores: ["Utilizar navegadores y buscadores web en la b√∫squeda de informaci√≥n en internet siguiendo una consigna dada."] },
                { nombre: "Buscador", indicadores: ["Utilizar navegadores y buscadores web en la b√∫squeda de informaci√≥n en internet siguiendo una consigna dada."] },
                { nombre: "Internet", indicadores: ["Identificar dispositivos que se conectan a internet describiendo sus funciones b√°sicas."] },
                { nombre: "Netiqueta", indicadores: ["Aplicar normas de netiqueta durante la interacci√≥n en entornos digitales."] },
                { nombre: "Comunicaci√≥n y colaboraci√≥n sincr√≥nica y asincr√≥nica (chat)", indicadores: ["Identificar el chat como herramienta de comunicaci√≥n y colaboraci√≥n sincr√≥nica y asincr√≥nica."] },
                { nombre: "Huella digital", indicadores: ["Identificar los usos e implicaciones de la huella digital, reconociendo c√≥mo las acciones dejan rastros permanentes."] },
                { nombre: "Contrase√±as seguras", indicadores: ["Identificar qu√© es una contrase√±a segura y sus elementos b√°sicos."] },
                { nombre: "Hackeo", indicadores: ["Identificar qu√© es hackeo, phishing y conexiones inseguras, reconociendo situaciones de riesgo."] },
                { nombre: "Software malicioso", indicadores: ["Identificar qu√© es un virus inform√°tico como tipo de software malicioso."] },
                { nombre: "Antivirus", indicadores: ["Identificar la funci√≥n y caracter√≠sticas de un antivirus."] }
              ]
            },
            "Programaci√≥n y Algoritmos": {
              saberes: [
                { nombre: "Entorno de programaci√≥n por bloques", indicadores: ["Utilizar el entorno de programaci√≥n por bloques explorando la interfaz y organizando bloques en la resoluci√≥n de retos programados."] },
                { nombre: "Estado", indicadores: ["Identificar el concepto de estado, reconociendo cambios en las propiedades de orientaci√≥n, direcci√≥n y tama√±o."] },
                { nombre: "Algoritmo (pseudoc√≥digo)", indicadores: ["Hacer uso de algoritmos en pseudoc√≥digo utilizando instrucciones de forma l√≥gica y estructurada."] },
                { nombre: "Dato", indicadores: ["Organizar datos tipo num√©rico y de texto, reconociendo su uso en situaciones cotidianas."] },
                { nombre: "Variable", indicadores: ["Gestionar una variable en la resoluci√≥n de ejercicios a trav√©s de algoritmos o actividades programadas."] },
                { nombre: "Estructuras repetitivas", indicadores: ["Utilizar estructuras repetitivas en pseudoc√≥digo o programaci√≥n por bloques."] },
                { nombre: "Estructuras condicionales", indicadores: ["Utilizar estructuras condicionales simples y compuestas en pseudoc√≥digo o programaci√≥n."] },
                { nombre: "Operadores aritm√©ticos", indicadores: ["Utilizar operadores aritm√©ticos de suma, resta, multiplicaci√≥n y divisi√≥n en pseudoc√≥digo o programaci√≥n."] },
                { nombre: "Operadores relacionales", indicadores: ["Utilizar operadores relacionales en pseudoc√≥digo o programaci√≥n, comparando valores."] },
                { nombre: "Eventos", indicadores: ["Utilizar eventos en pseudoc√≥digo o programaci√≥n para el control de acciones y reacciones."] }
              ]
            },
            "Ciencia de datos e Inteligencia Artificial": {
              saberes: [
                { nombre: "Fundamentos de la IA", indicadores: ["Identificar los fundamentos de la inteligencia artificial, reconociendo c√≥mo aprende, toma decisiones y se diferencia de otros sistemas automatizados."] },
                { nombre: "Asistentes virtuales", indicadores: ["Explicar el aporte de los asistentes virtuales en situaciones cotidianas, mediante el an√°lisis de ejemplos visuales, simulaciones o actividades guiadas."] }
              ]
            }
          },
          "5¬∞": {
            "Apropiaci√≥n tecnol√≥gica y Digital": {
              saberes: [
                { nombre: "Hardware", indicadores: ["Identificar dispositivos de hardware de entrada y salida mixtos como la impresora multifuncional y las pantallas interactivas."] },
                { nombre: "Software", indicadores: ["Identificar la funcionalidad y el prop√≥sito de los diferentes softwares de ofim√°tica."] },
                { nombre: "Conexi√≥n entre dispositivos", indicadores: ["Identificar las formas de conexi√≥n entre dispositivos, comprendiendo los tipos de comunicaci√≥n y m√©todos b√°sicos para la transmisi√≥n de archivos."] },
                { nombre: "Sistema operativo", indicadores: ["Identificar la funcionalidad del escritorio en un sistema operativo, reconociendo los elementos b√°sicos de la barra de tareas."] },
                { nombre: "Herramienta de productividad (hoja de c√°lculo)", indicadores: ["Identificar la funcionalidad de la hoja de c√°lculo como herramienta de productividad, aplicando opciones de edici√≥n y formato."] },
                { nombre: "Herramientas de creaci√≥n de contenido multimedia (audio y video)", indicadores: ["Elaborar contenido (audio y/o video) aplicando herramientas de creaci√≥n y edici√≥n de contenido multimedia disponibles."] },
                { nombre: "Buscador", indicadores: ["Realizar b√∫squedas eficientes en internet utilizando un buscador, aplicando filtros y comandos b√°sicos, y reconociendo dominios confiables (.edu, .go, .org, .com)."] },
                { nombre: "Derechos de autor", indicadores: ["Reconocer qu√© es derecho de autor y c√≥mo incorporarlo en sus producciones, evitando el plagio al citar adecuadamente las fuentes utilizadas."] }
              ]
            },
            "Programaci√≥n y Algoritmos": {
              saberes: [
                { nombre: "Entorno de programaci√≥n por bloques para computaci√≥n f√≠sica", indicadores: ["Utilizar el entorno de programaci√≥n por bloques para computaci√≥n f√≠sica explorando la interfaz y organizando bloques."] },
                { nombre: "L√≥gica de programaci√≥n", indicadores: ["Reconocer proposiciones como afirmaciones verdaderas o falsas en el contexto de la l√≥gica de programaci√≥n."] },
                { nombre: "Algoritmo (Diagrama de flujo)", indicadores: ["Aplicar mediante diagramas de flujo un algoritmo, utilizando s√≠mbolos y secuencias l√≥gicas."] },
                { nombre: "Dato", indicadores: ["Utilizar datos tipo booleano en la resoluci√≥n de problemas en entornos de programaci√≥n."] },
                { nombre: "Variable", indicadores: ["Aplicar la gesti√≥n de variables en programaci√≥n, modificando su valor durante la ejecuci√≥n de algoritmos."] },
                { nombre: "Colecci√≥n de datos", indicadores: ["Organizar datos en programaci√≥n mediante el uso de listas o agrupaciones de elementos con caracter√≠sticas comunes."] },
                { nombre: "Estructuras condicionales", indicadores: ["Aplicar estructuras condicionales m√∫ltiples en diagramas de flujo o programaci√≥n."] },
                { nombre: "Operadores L√≥gicos", indicadores: ["Reconocer operadores l√≥gicos de conjunci√≥n (Y) y disyunci√≥n (O) en la resoluci√≥n de problemas."] },
                { nombre: "Procedimientos/funciones", indicadores: ["Reconocer procedimientos o funciones en programaci√≥n, comprendiendo c√≥mo se declaran, invocan y se usan par√°metros y argumentos."] }
              ]
            },
            "Computaci√≥n f√≠sica y Rob√≥tica": {
              saberes: [
                { nombre: "Robot", indicadores: ["Reconocer qu√© es y qu√© no es un robot, identificando sus componentes b√°sicos como el cuerpo, el sistema sensorial y el sistema de control."] },
                { nombre: "Computaci√≥n f√≠sica", indicadores: ["Reconocer los componentes b√°sicos de la computaci√≥n f√≠sica, como el microcontrolador, sensores, actuadores y el entorno de programaci√≥n."] },
                { nombre: "Circuito el√©ctrico", indicadores: ["Identificar componentes b√°sicos de un circuito el√©ctrico, reconociendo su tipo, el flujo de corriente, la polaridad y la funci√≥n del interruptor."] },
                { nombre: "Fundamentos de electr√≥nica", indicadores: ["Identificar fundamentos de electr√≥nica, reconociendo la funci√≥n de los pines de entrada y salida, as√≠ como la diferencia entre se√±ales anal√≥gicas y digitales."] },
                { nombre: "Microcontrolador", indicadores: ["Reconocer el funcionamiento b√°sico de un microcontrolador, identificando los pines digitales y anal√≥gicos."] },
                { nombre: "Sensor", indicadores: ["Identificar sensores integrados y externos, reconociendo su funcionamiento y la forma de conectarlos a VCC y GND."] },
                { nombre: "Actuador", indicadores: ["Identificar actuadores integrados y externos, reconociendo c√≥mo se conectan a VCC y GND mientras generan una salida f√≠sica."] },
                { nombre: "Dom√≥tica", indicadores: ["Identificar usos y aplicaciones de la dom√≥tica, reconociendo c√≥mo la automatizaci√≥n mejora la comodidad y eficiencia."] }
              ]
            },
            "Ciencia de datos e Inteligencia Artificial": {
              saberes: [
                { nombre: "Dato", indicadores: ["Identificar el dato de tipo num√©rico y de texto en situaciones cotidianas, a partir del registro de informaci√≥n."] },
                { nombre: "Recolecci√≥n de datos", indicadores: ["Reconocer t√©cnicas de recolecci√≥n de datos seg√∫n el tipo de informaci√≥n que se desea obtener."] },
                { nombre: "Almacenamiento de datos", indicadores: ["Identificar formas de almacenamiento de datos, reconociendo c√≥mo se utilizan archivos locales y hojas de c√°lculo."] },
                { nombre: "Visualizaci√≥n de datos", indicadores: ["Identificar la visualizaci√≥n de datos mediante formas de representaci√≥n como gr√°ficos o tablas."] },
                { nombre: "Estrategias para presentar datos", indicadores: ["Reconocer las tablas como una estrategia para presentar datos organizadamente."] },
                { nombre: "Herramientas generativas", indicadores: ["Reconocer herramientas digitales generativas (texto, imagen o audio) que producen contenido a partir de instrucciones sencillas."] },
                { nombre: "Desaf√≠os de la IA", indicadores: ["Reconocer desaf√≠os de la inteligencia artificial relacionados con la protecci√≥n de la informaci√≥n personal sensible."] }
              ]
            }
          },
          "6¬∞": {
            "Apropiaci√≥n tecnol√≥gica y Digital": {
              saberes: [
                { nombre: "Hardware", indicadores: ["Analizar las funciones de los componentes internos del hardware como la memoria RAM, tarjeta madre, disco duro, microprocesador y tarjetas de red, video y sonido."] },
                { nombre: "Conexi√≥n entre dispositivos", indicadores: ["Explicar c√≥mo las direcciones IP permiten la conexi√≥n entre dispositivos y su comunicaci√≥n dentro de una red local o en internet."] },
                { nombre: "Redes de comunicaci√≥n", indicadores: ["Describir diferentes tipos de redes de comunicaci√≥n (red fija telef√≥nica, red m√≥vil, red de televisi√≥n por cable y red satelital)."] },
                { nombre: "Gesti√≥n de archivos", indicadores: ["Analizar la gesti√≥n de archivos considerando las propiedades de los archivos digitales (tama√±o, tipo y extensi√≥n) y aplicando procesos de compresi√≥n y descompresi√≥n."] },
                { nombre: "Sistema operativo", indicadores: ["Identificar herramientas del sistema operativo como el administrador de tareas, la limpieza de archivos temporales y la gesti√≥n de memoria."] },
                { nombre: "Herramienta de productividad", indicadores: ["Utilizar la herramienta de productividad seleccionando entre opciones de ofim√°tica local o en l√≠nea, seg√∫n el contexto de uso."] },
                { nombre: "Herramientas de creaci√≥n de contenido multimedia", indicadores: ["Crear contenido (imagen, audio y/o video) con herramientas de creaci√≥n de contenido multimedia disponibles."] },
                { nombre: "Internet", indicadores: ["Identificar el funcionamiento b√°sico de Internet, reconociendo c√≥mo se establece la conectividad y el rol de los proveedores de servicios."] },
                { nombre: "Comunicaci√≥n y colaboraci√≥n sincr√≥nica y asincr√≥nica", indicadores: ["Aplicar la comunicaci√≥n y colaboraci√≥n sincr√≥nica y asincr√≥nica en la creaci√≥n de documentos, organizaci√≥n de carpetas y gesti√≥n del correo electr√≥nico."] },
                { nombre: "Almacenamiento en la nube", indicadores: ["Crear archivos digitales en plataformas de almacenamiento en la nube, configurando los permisos de uso compartido."] },
                { nombre: "Referencias bibliogr√°ficas", indicadores: ["Aplicar un formato b√°sico de referencias bibliogr√°ficas (autor, t√≠tulo y fuente) en las producciones."] },
                { nombre: "Internet de las cosas", indicadores: ["Reconocer aplicaciones del Internet de las Cosas (IoT) en la cotidianidad."] },
                { nombre: "Moneda virtual", indicadores: ["Reconocer la utilidad e implicaciones b√°sicas de las monedas virtuales."] },
                { nombre: "Huella digital", indicadores: ["Aplicar medidas b√°sicas para proteger la privacidad en l√≠nea, gestionando su huella digital."] },
                { nombre: "Contrase√±as seguras", indicadores: ["Reconocer la importancia de las contrase√±as seguras, aplicando estrategias b√°sicas como el uso de doble factor."] },
                { nombre: "Software malicioso", indicadores: ["Identificar las formas comunes de propagaci√≥n de software malicioso y estrategias b√°sicas de prevenci√≥n."] },
                { nombre: "Riesgos en l√≠nea", indicadores: ["Identificar riesgos en l√≠nea como ciberacoso, contenido inapropiado y suplantaci√≥n de identidad."] },
                { nombre: "Medidas de seguridad en la web", indicadores: ["Identificar medidas de seguridad en la web, reconociendo la diferencia entre HTTPS y HTTP."] }
              ]
            },
            "Programaci√≥n y Algoritmos": {
              saberes: [
                { nombre: "L√≥gica de programaci√≥n (tablas de verdad)", indicadores: ["Aplicar la l√≥gica de programaci√≥n (tablas de verdad) con operadores de conjunci√≥n y disyunci√≥n."] },
                { nombre: "Procedimientos/funciones", indicadores: ["Emplear procedimientos o funciones (declaraci√≥n, invocaci√≥n, par√°metros y argumentos) en la resoluci√≥n de ejercicios programados."] }
              ]
            },
            "Computaci√≥n f√≠sica y Rob√≥tica": {
              saberes: [
                { nombre: "Computaci√≥n f√≠sica", indicadores: ["Aplicar la computaci√≥n f√≠sica en la creaci√≥n de soluciones automatizadas, como respuesta a necesidades concretas del entorno cotidiano."] },
                { nombre: "Prototipos", indicadores: ["Dise√±ar prototipos de sistemas automatizados, aplicando conocimientos de computaci√≥n f√≠sica para resolver necesidades concretas."] }
              ]
            },
            "Ciencia de datos e Inteligencia Artificial": {
              saberes: [
                { nombre: "Dato", indicadores: ["Aplicar registros como datos relevantes, organizando informaci√≥n en tablas a partir de gastos, notas, actividades deportivas o registros b√°sicos de salud."] },
                { nombre: "Recolecci√≥n de datos", indicadores: ["Seleccionar t√©cnicas de recolecci√≥n de datos aplic√°ndolas seg√∫n el tipo de informaci√≥n que se desea obtener."] },
                { nombre: "Almacenamientos de datos", indicadores: ["Aplicar formas de almacenamiento de datos como archivos locales o en l√≠nea y herramientas digitales como hojas de c√°lculo."] },
                { nombre: "Visualizaci√≥n de datos", indicadores: ["Aplicar t√©cnicas de visualizaci√≥n de datos, creando representaciones gr√°ficas simples como gr√°ficos pict√≥ricos o de barras."] },
                { nombre: "Estrategias para presentar datos", indicadores: ["Crear gr√°ficos de barras o lineales a partir de datos, aplicando estrategias para representar datos."] }
              ]
            }
          },
          "7¬∞": {
            "Apropiaci√≥n tecnol√≥gica y Digital": {
              saberes: [
                { nombre: "Computadora", indicadores: ["Aplicar reglas b√°sicas y responsabilidades durante el uso de una computadora, contribuyendo al cuidado, seguridad y prolongaci√≥n de su vida √∫til."] },
                { nombre: "Hardware", indicadores: ["Clasificar tipos de computadoras y sus componentes principales de hardware, identificando funciones de perif√©ricos comunes."] },
                { nombre: "Software", indicadores: ["Distinguir los tipos de software relacion√°ndolos con sus funciones y usos en tareas cotidianas."] },
                { nombre: "Redes de comunicaci√≥n", indicadores: ["Identificar tipos de redes de comunicaci√≥n y sus dispositivos principales (m√≥dem, router y puntos de acceso)."] },
                { nombre: "Sistema operativo", indicadores: ["Identificar las categor√≠as de los sistemas operativos (escritorio y dispositivos m√≥viles), describiendo su funci√≥n b√°sica."] },
                { nombre: "Gesti√≥n de archivos", indicadores: ["Aplicar las propiedades (tama√±o, tipo y extensi√≥n) en la gesti√≥n de archivos para compartir informaci√≥n."] },
                { nombre: "Herramienta de productividad (Procesador de texto, Editor de presentaciones)", indicadores: ["Aplicar la herramienta de productividad c√≥mo procesador de texto y/o editor de presentaci√≥n para crear productos comunicativos."] },
                { nombre: "Herramientas de creaci√≥n de contenido multimedia (Editor de gr√°ficos)", indicadores: ["Dise√±ar productos visuales con herramientas de creaci√≥n multimedia utilizando editores gr√°ficos."] },
                { nombre: "Internet", indicadores: ["Reconocer el funcionamiento de Internet, comprendiendo la conectividad entre dispositivos y el rol de los proveedores de servicio (ISP)."] },
                { nombre: "Navegador", indicadores: ["Utilizar el navegador y el buscador web para acceder y localizar informaci√≥n en l√≠nea, gestionando pesta√±as."] },
                { nombre: "Buscador", indicadores: ["Utilizar el navegador y el buscador web para acceder y localizar informaci√≥n en l√≠nea, gestionando pesta√±as."] },
                { nombre: "Netiqueta", indicadores: ["Utilizar herramientas de comunicaci√≥n y colaboraci√≥n sincr√≥nica y asincr√≥nica, aplicando normas de netiqueta."] },
                { nombre: "Comunicaci√≥n y colaboraci√≥n sincr√≥nica/asincr√≥nica", indicadores: ["Utilizar herramientas de comunicaci√≥n y colaboraci√≥n sincr√≥nica y asincr√≥nica, aplicando normas de netiqueta."] },
                { nombre: "Almacenamiento en la nube", indicadores: ["Utilizar el almacenamiento en la nube para guardar, organizar y compartir archivos digitales."] },
                { nombre: "Referencias bibliogr√°ficas", indicadores: ["Aplicar formatos b√°sicos de referencias bibliogr√°ficas en producciones digitales o escritas."] },
                { nombre: "Criptomonedas", indicadores: ["Reconocer la utilidad e implicaciones del uso de criptomonedas en entornos digitales cotidianos."] },
                { nombre: "Contrase√±as seguras", indicadores: ["Crear contrase√±as seguras utilizando generadores aleatorios."] },
                { nombre: "Software malicioso", indicadores: ["Reconocer las caracter√≠sticas del software malicioso, analizando los riesgos asociados."] },
                { nombre: "Riesgos en l√≠nea", indicadores: ["Identificar riesgos en l√≠nea como la suplantaci√≥n de identidad, grooming, phishing y noticias falsas."] }
              ]
            },
            "Programaci√≥n y Algoritmos": {
              saberes: [
                { nombre: "Entorno de programaci√≥n textual o bloques", indicadores: ["Reconocer un entorno de programaci√≥n textual o bloques, identificando sus funciones."] },
                { nombre: "L√≥gica de programaci√≥n", indicadores: ["Identificar la l√≥gica de programaci√≥n con el uso de proposiciones y conectores l√≥gicos (AND, OR, NOT)."] },
                { nombre: "Algoritmo", indicadores: ["Reconocer el algoritmo identificando su estructura (entrada, proceso, salida) y aplicando sus caracter√≠sticas."] },
                { nombre: "Dato", indicadores: ["Identificar tipos de dato y formas de almacenamiento, aplic√°ndolos en la creaci√≥n de algoritmos."] },
                { nombre: "Variable", indicadores: ["Identificar tipos de variable, aplicando su gesti√≥n mediante declaraciones y asignaciones."] },
                { nombre: "Estructuras condicionales", indicadores: ["Aplicar estructuras condicionales en un entorno de programaci√≥n para la resoluci√≥n de desaf√≠os."] },
                { nombre: "Estructuras repetitivas", indicadores: ["Aplicar estructuras repetitivas en un entorno de programaci√≥n para resolver desaf√≠os."] },
                { nombre: "Operadores aritm√©ticos", indicadores: ["Aplicar operadores aritm√©ticos (suma, resta, multiplicaci√≥n y divisi√≥n) para resolver c√°lculos."] },
                { nombre: "Operadores relacionales", indicadores: ["Aplicar operadores relacionales para realizar comparaciones."] },
                { nombre: "Operadores l√≥gicos", indicadores: ["Aplicar operadores l√≥gicos (Y, O, NO) en la resoluci√≥n de desaf√≠os de programaci√≥n."] },
                { nombre: "Evento", indicadores: ["Aplicar un evento como acci√≥n que se detona mediante una causa y un efecto."] },
                { nombre: "Procedimientos y/o funciones", indicadores: ["Aplicar procedimientos y/o funciones como estructura modular, a trav√©s de su declaraci√≥n e invocaci√≥n."] }
              ]
            },
            "Ciencia de datos e Inteligencia Artificial": {
              saberes: [
                { nombre: "Dato", indicadores: ["Identificar tipos de dato (num√©ricos, de texto, de ubicaci√≥n y de im√°genes), analizando c√≥mo influye en decisiones."] },
                { nombre: "Fundamentos de la IA", indicadores: ["Reconocer los fundamentos de la inteligencia artificial, identificando el concepto y sus aplicaciones."] },
                { nombre: "Asistentes virtuales", indicadores: ["Identificar qu√© son los asistentes virtuales basados en inteligencia artificial, reconociendo su utilidad."] }
              ]
            }
          },
          "8¬∞": {
            "Apropiaci√≥n tecnol√≥gica y Digital": {
              saberes: [
                { nombre: "Hardware", indicadores: ["Analizar el funcionamiento de los componentes internos del hardware, describiendo c√≥mo influyen en el rendimiento."] },
                { nombre: "Software", indicadores: ["Analizar los tipos de software seg√∫n su funci√≥n, comparando las caracter√≠sticas y usos."] },
                { nombre: "Redes de comunicaci√≥n", indicadores: ["Identificar las funciones de las unidades de almacenamiento de las redes de comunicaci√≥n."] },
                { nombre: "Conexi√≥n entre dispositivos", indicadores: ["Distinguir las formas de conexi√≥n entre dispositivos mediante comunicaci√≥n f√≠sica o inal√°mbrica."] },
                { nombre: "Sistema Operativo", indicadores: ["Reconocer las caracter√≠sticas del sistema operativo y la diferencia entre software libre y de paga."] },
                { nombre: "Gesti√≥n de archivos", indicadores: ["Aplicar la compresi√≥n y descompresi√≥n de archivos como parte de la gesti√≥n de archivos digitales."] },
                { nombre: "Herramienta de productividad (Hoja de c√°lculo)", indicadores: ["Utilizar la hoja de c√°lculo como herramienta de productividad en la organizaci√≥n y representaci√≥n de datos."] },
                { nombre: "Herramientas de creaci√≥n de contenido multimedia (Edici√≥n de audio y video)", indicadores: ["Utilizar herramientas de creaci√≥n de contenido multimedia en la edici√≥n de audio o video."] },
                { nombre: "Buscador", indicadores: ["Utilizar el buscador web como herramienta para la localizaci√≥n de informaci√≥n, aplicando criterios que identifiquen fuentes confiables."] },
                { nombre: "Plataformas de creaci√≥n de contenido", indicadores: ["Utilizar plataformas de creaci√≥n de contenido digital en la elaboraci√≥n de infograf√≠as, diagramas o presentaciones."] },
                { nombre: "Licencia", indicadores: ["Reconocer la licencia digital en el uso de contenido en l√≠nea, valorando sus alcances y limitaciones."] },
                { nombre: "Internet de las cosas", indicadores: ["Analizar aplicaciones del Internet de las cosas en la automatizaci√≥n de tareas."] },
                { nombre: "Hackeo", indicadores: ["Reconocer el hackeo como una amenaza digital, diferenciando tipos de hacker."] },
                { nombre: "Software malicioso", indicadores: ["Aplicar medidas de protecci√≥n digital mediante el reconocimiento de tipos de software malicioso y el uso adecuado del antivirus."] },
                { nombre: "Antivirus", indicadores: ["Aplicar medidas de protecci√≥n digital mediante el reconocimiento de tipos de software malicioso y el uso adecuado del antivirus."] }
              ]
            },
            "Programaci√≥n y Algoritmos": {
              saberes: [
                { nombre: "Entorno de programaci√≥n textual o bloques para programar mecanismos rob√≥ticos", indicadores: ["Aplicar el entorno de programaci√≥n textual o por bloques para programar mecanismos rob√≥ticos, utilizando estructuras y eventos."] },
                { nombre: "Colecci√≥n de datos", indicadores: ["Gestionar una colecci√≥n de datos como listas o arreglos mediante su creaci√≥n, recorrido y modificaci√≥n."] }
              ]
            },
            "Computaci√≥n f√≠sica y Rob√≥tica": {
              saberes: [
                { nombre: "Robot", indicadores: ["Reconocer qu√© es un robot, sus tipos y componentes (cuerpo, sistema sensorial y sistema de control)."] },
                { nombre: "Rob√≥tica", indicadores: ["Diferenciar la computaci√≥n f√≠sica con la rob√≥tica, identificando c√≥mo los sensores, actuadores y sistemas de control se integran."] },
                { nombre: "Mec√°nica aplicada a la rob√≥tica", indicadores: ["Emplear principios de la mec√°nica aplicados a la rob√≥tica, como la estructura y la estabilidad."] },
                { nombre: "Mecanismos", indicadores: ["Reconocer los tipos de mecanismos, identificando su funci√≥n principal en la transmisi√≥n y transformaci√≥n del movimiento."] },
                { nombre: "Circuito el√©ctrico", indicadores: ["Identificar los componentes de un circuito el√©ctrico y su funcionamiento."] },
                { nombre: "Fundamentos de electr√≥nica", indicadores: ["Identificar fundamentos de electr√≥nica, reconociendo la funci√≥n de pines de entrada y salida."] },
                { nombre: "Microcontrolador", indicadores: ["Comprender los componentes b√°sicos de un microcontrolador, aplicando la funci√≥n de pines digitales y anal√≥gicos."] },
                { nombre: "Sensor", indicadores: ["Utilizar un sensor integrado y/o externo, comprendiendo su funci√≥n y su correcta conexi√≥n a VCC y GND."] },
                { nombre: "Actuador", indicadores: ["Utilizar un actuador integrado y/o externo, comprendiendo su funci√≥n y c√≥mo se conecta correctamente a VCC y GND."] }
              ]
            },
            "Ciencia de datos e Inteligencia Artificial": {
              saberes: [
                { nombre: "Recolecci√≥n de datos", indicadores: ["Aplicar t√©cnicas de recolecci√≥n de datos mediante registros escolares y personales."] },
                { nombre: "Fundamentos de la IA", indicadores: ["Reconocer los fundamentos de la inteligencia artificial, identificando c√≥mo funciona y se diferencia de otros sistemas digitales."] },
                { nombre: "Herramientas generativas", indicadores: ["Utilizar herramientas generativas basadas en inteligencia artificial, aplicando funciones para la creaci√≥n o modificaci√≥n de contenido digital."] }
              ]
            }
          },
          "9¬∞": {
            "Apropiaci√≥n tecnol√≥gica y Digital": {
              saberes: [
                { nombre: "Redes de comunicaci√≥n", indicadores: ["Reconocer las redes de comunicaci√≥n a partir de su arquitectura, protocolos (como HTTP, HTTPS y TCP/IP) e interfaces."] },
                { nombre: "Sistema Operativo", indicadores: ["Aplicar t√©cnicas de optimizaci√≥n del sistema operativo, identificando c√≥mo gestionar memoria, desfragmentar discos, limpiar cach√© y actualizar el sistema."] },
                { nombre: "Herramienta de productividad (Gestor de bases de datos)", indicadores: ["Utilizar un gestor de bases de datos como herramienta de productividad para la creaci√≥n de tablas, estableciendo relaciones entre ellas y realizando consultas."] },
                { nombre: "Herramientas de creaci√≥n de contenido multimedia", indicadores: ["Utilizar herramientas de creaci√≥n de contenido multimedia para el modelado 3D."] },
                { nombre: "Plataformas de creaci√≥n de contenido", indicadores: ["Crear encuestas o formularios mediante plataformas de creaci√≥n de contenido, ajustando su formato y estructura."] },
                { nombre: "Derechos de autor y licenciamiento", indicadores: ["Reconocer la importancia de los derechos de autor y el licenciamiento, aplicando buenas pr√°cticas de uso √©tico y legal."] },
                { nombre: "Huella digital", indicadores: ["Analizar la utilidad e implicaciones de la huella digital, valorando c√≥mo las acciones en l√≠nea afectan la identidad, reputaci√≥n y seguridad."] },
                { nombre: "Riesgos en l√≠nea", indicadores: ["Analizar riesgos en l√≠nea (acceso a informaci√≥n inapropiada, ciberadicci√≥n, ciberacoso y el sexting)."] }
              ]
            },
            "Programaci√≥n y Algoritmos": {
              saberes: [
                { nombre: "Entorno de programaci√≥n textual o bloques para programar mecanismos rob√≥ticos", indicadores: ["Dise√±ar soluciones automatizadas en un entorno de programaci√≥n textual o por bloques para programar mecanismos rob√≥ticos."] },
                { nombre: "Algoritmo", indicadores: ["Dise√±ar un algoritmo para resolver un problema, represent√°ndolo de forma estructurada mediante pseudoc√≥digo o diagrama de flujo."] }
              ]
            },
            "Computaci√≥n f√≠sica y Rob√≥tica": {
              saberes: [
                { nombre: "Movimiento en mecanismos", indicadores: ["Identificar el movimiento en mecanismos rob√≥ticos, diferenciando el movimiento de entrada y salida."] },
                { nombre: "Microcontrolador", indicadores: ["Aplicar las funciones de un microcontrolador, utilizando pines digitales y anal√≥gicos, conexi√≥n a VCC y GND."] },
                { nombre: "Sensor", indicadores: ["Integrar un sensor en un prototipo, utilizando sus datos como entrada para generar respuestas automatizadas."] },
                { nombre: "Actuador", indicadores: ["Integrar un actuador en un prototipo, programando su activaci√≥n como respuesta a entradas digitales o condiciones del sistema."] },
                { nombre: "Dom√≥tica", indicadores: ["Analizar los usos, aplicaciones y beneficios de la dom√≥tica, mediante la creaci√≥n o simulaci√≥n de un prototipo."] },
                { nombre: "Prototipos", indicadores: ["Construir prototipos que integren sensores, actuadores y un microcontrolador, a partir de una necesidad identificada."] }
              ]
            },
            "Ciencia de datos e Inteligencia Artificial": {
              saberes: [
                { nombre: "Dato", indicadores: ["Reconocer la importancia de la organizaci√≥n y conservaci√≥n del dato, aplicando criterios de seguridad y responsabilidad."] },
                { nombre: "Almacenamiento de datos", indicadores: ["Reconocer el ciclo de vida del dato en el almacenamiento de datos, identificando las etapas de creaci√≥n, uso, conservaci√≥n y eliminaci√≥n responsable."] },
                { nombre: "Herramientas generativas", indicadores: ["Aplicar herramientas generativas con inteligencia artificial en la producci√≥n de contenido digital, considerando criterios de seguridad, propiedad intelectual y responsabilidad digital."] },
                { nombre: "Desaf√≠os de la IA", indicadores: ["Reconocer los desaf√≠os de la inteligencia artificial, identificando riesgos como sesgos, manipulaci√≥n de informaci√≥n, dependencia tecnol√≥gica y privacidad de datos."] }
              ]
            }
          }
        };

        // ===== RESULTADOS DE APRENDIZAJE (RdA) POR CICLO Y √ÅREA =====
        const RDA_POR_CICLO = {
          "Preescolar": {
            "Apropiaci√≥n tecnol√≥gica y Digital": "Identifica los dispositivos digitales considerando caracter√≠sticas funcionales, experimentando su utilidad y reconociendo la autor√≠a, durante la accesibilidad, interacci√≥n y comunicaci√≥n en la creaci√≥n de recursos digitales.",
            "Programaci√≥n y Algoritmos": "Ordena secuencias integrando conceptos de programaci√≥n como dato, evento, estado, ciclos, as√≠ como nociones de lateralidad y orientaci√≥n espacial, en la soluci√≥n de desaf√≠os propuestos, utilizando la programaci√≥n iconogr√°fica por bloques.",
            "Computaci√≥n f√≠sica y Rob√≥tica": "Reconoce el funcionamiento de los robots, as√≠ como sus componentes (cuerpo, sistema sensorial, sistemas de control), al clasificarlos por su uso y programarlos para resolver retos.",
            "Ciencia de datos e Inteligencia Artificial": "Reconoce los conceptos b√°sicos relacionados con la recopilaci√≥n, organizaci√≥n e interpretaci√≥n de datos, mediante gr√°ficos pict√≥ricos en la resoluci√≥n de problemas, fomentando el pensamiento cr√≠tico y la curiosidad hacia el mundo que lo rodea."
          },
          "I Ciclo": {
            "Apropiaci√≥n tecnol√≥gica y Digital": "Selecciona los dispositivos digitales y herramientas de productividad, mediante el uso de software y hardware, en la creaci√≥n de archivos, creaci√≥n y edici√≥n de contenido multimedia, aprovechando Internet y respetando la propiedad intelectual en la realizaci√≥n de tareas para la accesibilidad a la informaci√≥n de forma segura y responsable.",
            "Programaci√≥n y Algoritmos": "Selecciona conceptos de programaci√≥n como dato, secuencia, evento, estado, variables, operadores aritm√©ticos y relacionales, condicionales simples, ciclo finito e infinito, en la programaci√≥n por bloques para la soluci√≥n de problemas.",
            "Computaci√≥n f√≠sica y Rob√≥tica": "No aplica para este ciclo.",
            "Ciencia de datos e Inteligencia Artificial": "Reconoce los fundamentos de la inteligencia artificial y su presencia en la vida cotidiana, mediante ejemplos concretos como asistentes virtuales, valorando el uso seguro y responsable de estas tecnolog√≠as."
          },
          "II Ciclo": {
            "Apropiaci√≥n tecnol√≥gica y Digital": "Selecciona la configuraci√≥n de programas locales y en l√≠nea para su correcto uso al crear, buscar, compartir, organizar y administrar informaci√≥n en la realizaci√≥n de diferentes tareas de manera comprensiva, segura y responsable.",
            "Programaci√≥n y Algoritmos": "Crea algoritmos que integran los conceptos de programaci√≥n como secuencia, evento, estructuras de control (condicionales simples y ciclos), en la soluci√≥n a problemas del contexto mediante la programaci√≥n por bloques.",
            "Computaci√≥n f√≠sica y Rob√≥tica": "Crea algoritmos que permiten la simulaci√≥n de comportamientos de aparatos tecnol√≥gicos, aplicando elementos de computaci√≥n f√≠sica, programaci√≥n y electr√≥nica para la resoluci√≥n de un problema.",
            "Ciencia de datos e Inteligencia Artificial": "Reconoce el uso de la inteligencia artificial en contextos cotidianos y aplica t√©cnicas b√°sicas de recolecci√≥n, an√°lisis y representaci√≥n de datos mediante tablas y gr√°ficos."
          },
          "III Ciclo": {
            "Apropiaci√≥n tecnol√≥gica y Digital": "Combina herramientas digitales, tomando en cuenta fundamentos de tecnolog√≠a, impacto de las TIC, seguridad y privacidad digital y su experiencia de uso, en la realizaci√≥n de productos digitales.",
            "Programaci√≥n y Algoritmos": "Integra conceptos de programaci√≥n como eventos, operadores, estructuras de datos, estructuras de control, procedimientos, funciones, colecciones de datos y algoritmos (diagrama de flujo y pseudoc√≥digo), en la soluci√≥n de problemas reales.",
            "Computaci√≥n f√≠sica y Rob√≥tica": "Aplica fundamentos de rob√≥tica, computaci√≥n f√≠sica, electr√≥nica, mec√°nica y sistemas rob√≥ticos aut√≥nomos en la programaci√≥n y construcci√≥n de prototipos que resuelven un problema.",
            "Ciencia de datos e Inteligencia Artificial": "Analiza datos mediante herramientas digitales que permiten su visualizaci√≥n para la toma de decisiones en situaciones cotidianas y reconoce aspectos fundamentales de la inteligencia artificial, incluyendo sus aplicaciones actuales y desaf√≠os asociados."
          }
        };

        // ===== VARIABLES GLOBALES =====
        let semanaCounter = 0;
        let planesGuardados = JSON.parse(localStorage.getItem('planesDidacticos')) || [];
        let planSeleccionado = null;

        // ===== INICIALIZACI√ìN =====
        document.addEventListener('DOMContentLoaded', function() {
            inicializarEventListeners();
            limpiarFormulario();
            console.log("‚úÖ Sistema PNFT inicializado - Base de datos completa cargada");
        });

        function inicializarEventListeners() {
            // Metodolog√≠a activa
            document.getElementById('metodologiaActiva').addEventListener('change', function() {
                document.getElementById('metodologiaOtra').style.display = this.value === 'otra' ? 'block' : 'none';
            });

            // Areas de conocimiento
            document.querySelectorAll('input[name="area"]').forEach(checkbox => {
                checkbox.addEventListener('change', function() {
                    actualizarRda();
                    actualizarSaberesEnTodasLasSemanas();
                    guardarDatosAutomaticamente();
                });
            });

            // Ciclo y nivel
            document.getElementById('ciclo').addEventListener('change', function() {
                actualizarRda();
                guardarDatosAutomaticamente();
            });
            
            document.getElementById('nivel').addEventListener('change', function() {
                actualizarRda();
                actualizarSaberesEnTodasLasSemanas();
                guardarDatosAutomaticamente();
            });

            // Lecciones planificadas
            document.getElementById('leccionesPlanificadas').addEventListener('change', function() {
                document.getElementById('totalLecciones').textContent = this.value;
                generarSemanas();
                guardarDatosAutomaticamente();
            });

            // Saberes manuales
            document.getElementById('saberesManuales').addEventListener('input', function() {
                actualizarSaberesManualesEnTodasLasSemanas();
                guardarDatosAutomaticamente();
            });

            // Ejes transversales - selecci√≥n m√∫ltiple
            document.querySelectorAll('.eje-option').forEach(option => {
                option.addEventListener('click', function(e) {
                    if (e.target.type !== 'checkbox') {
                        const checkbox = this.querySelector('input[type="checkbox"]');
                        checkbox.checked = !checkbox.checked;
                    }
                    this.classList.toggle('selected', this.querySelector('input[type="checkbox"]').checked);
                    guardarDatosAutomaticamente();
                });
            });

            // Guardar autom√°ticamente cuando se escriba en cualquier campo
            document.addEventListener('input', function(e) {
                if (e.target.classList.contains('input-field') || 
                    e.target.classList.contains('textarea-field') ||
                    e.target.classList.contains('contenedor-editable') ||
                    e.target.classList.contains('select-field')) {
                    guardarDatosAutomaticamente();
                }
            });

            // Guardar autom√°ticamente cuando se cambien checkboxes
            document.addEventListener('change', function(e) {
                if (e.target.type === 'checkbox' || e.target.type === 'radio') {
                    guardarDatosAutomaticamente();
                }
            });
        }

        // ===== LIMPIAR FORMULARIO AL INICIO =====
        function limpiarFormulario() {
            // Limpiar campos principales
            document.getElementById('direccionRegional').value = '';
            document.getElementById('centroEducativo').value = '';
            document.getElementById('codigoCentro').value = '';
            document.getElementById('nombreDocente').value = '';
            document.getElementById('ciclo').value = '';
            document.getElementById('nivel').value = '';
            document.getElementById('mesInicio').value = '';
            document.getElementById('mesFinal').value = '';
            
            // Limpiar checkboxes
            document.querySelectorAll('input[type="checkbox"]').forEach(cb => cb.checked = false);
            document.querySelectorAll('.eje-option').forEach(option => option.classList.remove('selected'));
            
            // Limpiar textareas
            document.getElementById('metodologiaOtra').value = '';
            document.getElementById('saberesManuales').value = '';
            document.getElementById('queFunciono').value = '';
            document.getElementById('queNoFunciono').value = '';
            document.getElementById('queMejorar').value = '';
            document.getElementById('observaciones').value = '';
            
            // Limpiar contenedores
            document.getElementById('rdaContainer').innerHTML = '<div class="saberes-info">Seleccione un nivel y al menos un √°rea de conocimiento</div>';
            document.getElementById('semanasContainer').innerHTML = '<div class="saberes-info">Ingrese la cantidad de lecciones planificadas para generar las semanas</div>';
            
            // Limpiar contadores
            document.getElementById('totalLecciones').textContent = '8';
            document.getElementById('totalSemanas').textContent = '0';
            
            // Limpiar localStorage
            localStorage.removeItem('planActual');
        }

        // ===== SISTEMA DE GUARDADO AUTOM√ÅTICO =====
        function guardarDatosAutomaticamente() {
            const datos = recopilarDatosPlan();
            localStorage.setItem('planActual', JSON.stringify(datos));
        }

        // ===== SISTEMA DE SEMANAS MEJORADO =====
        function generarSemanas() {
            const lecciones = parseInt(document.getElementById('leccionesPlanificadas').value) || 0;
            const semanasContainer = document.getElementById('semanasContainer');
            
            if (lecciones < 1) {
                semanasContainer.innerHTML = '<div class="saberes-info">Ingrese la cantidad de lecciones planificadas</div>';
                document.getElementById('totalSemanas').textContent = '0';
                return;
            }

            const cantidadSemanas = Math.ceil(lecciones / 4);
            document.getElementById('totalSemanas').textContent = cantidadSemanas;
            
            let html = '';
            semanaCounter = 0;
            
            for (let i = 0; i < cantidadSemanas; i++) {
                const leccionInicio = (i * 4) + 1;
                const leccionFin = Math.min((i + 1) * 4, lecciones);
                const leccionesEnSemana = leccionFin - leccionInicio + 1;
                
                html += crearHTMLSemana(i, leccionInicio, leccionFin, leccionesEnSemana);
                semanaCounter++;
            }
            
            semanasContainer.innerHTML = html;
            actualizarSaberesEnTodasLasSemanas();
            actualizarSaberesManualesEnTodasLasSemanas();
            
            // Cargar datos guardados para las semanas
            cargarDatosSemanasGuardados();
        }

        function crearHTMLSemana(index, leccionInicio, leccionFin, leccionesEnSemana) {
            return `
            <div class="semana-item" data-semana-index="${index}">
                <div class="semana-header">
                    <strong>Semana: <input type="text" class="semana-nombre" value="Semana ${leccionInicio}-${leccionFin}"></strong>
                    <span class="lecciones-info">Lecciones: <span class="lecciones-contador">${leccionesEnSemana}</span></span>
                    ${index > 0 ? '<button type="button" class="btn-eliminar-semana" onclick="eliminarSemana(this)">‚úï</button>' : ''}
                </div>
                
                <div class="semana-content">
                    <div class="semana-col">
                        <div class="semana-col-title">
                            Indicadores de logro
                            <button class="expand-btn" onclick="toggleExpansion(this)" title="Expandir">+</button>
                        </div>
                        <div class="contenedor-editable" contenteditable="false" style="background: #f8f9fa;">
                            Seleccione saberes conceptuales...
                        </div>
                    </div>
                    <div class="semana-col">
                        <div class="semana-col-title">
                            Estrategias de Mediaci√≥n
                            <button class="expand-btn" onclick="toggleExpansion(this)" title="Expandir">+</button>
                        </div>
                        <div class="contenedor-editable" contenteditable="true" id="estrategiasSemana${index}" data-placeholder="Escriba sus estrategias de mediaci√≥n aqu√≠..."></div>
                        <button type="button" class="copilot-btn" onclick="abrirSelectorIA(${index})">üìã Copiar Prompt para IA Externa</button>
                    </div>
                    <div class="semana-col">
                        <div class="semana-col-title">
                            Indicador de evaluaci√≥n
                            <button class="expand-btn" onclick="toggleExpansion(this)" title="Expandir">+</button>
                        </div>
                        <div class="contenedor-editable" contenteditable="true" data-placeholder="Indicador de evaluaci√≥n..."></div>
                    </div>
                </div>
                
                <div class="saberes-semana-container">
                    <div class="section-title">Saberes Conceptuales para esta semana</div>
                    <div class="saberes-semana-opciones" id="saberesSemana${index}">
                        <div class="saberes-info">Seleccione nivel y √°reas de conocimiento</div>
                    </div>
                    <div class="saberes-manuales-container">
                        <strong>Saberes manuales para esta semana:</strong>
                        <div id="saberesManualesSemana${index}" class="saberes-manuales-lista">
                            <em>No hay saberes manuales definidos</em>
                        </div>
                    </div>
                </div>
            </div>`;
        }

        function agregarSemanaManual() {
            const semanasContainer = document.getElementById('semanasContainer');
            const leccionesActuales = parseInt(document.getElementById('leccionesPlanificadas').value) || 0;
            const nuevaLeccionInicio = leccionesActuales + 1;
            const nuevaLeccionFin = leccionesActuales + 4;
            
            document.getElementById('leccionesPlanificadas').value = leccionesActuales + 4;
            document.getElementById('totalLecciones').textContent = leccionesActuales + 4;
            
            const nuevaSemanaHTML = crearHTMLSemana(semanaCounter, nuevaLeccionInicio, nuevaLeccionFin, 4);
            semanasContainer.insertAdjacentHTML('beforeend', nuevaSemanaHTML);
            
            semanaCounter++;
            document.getElementById('totalSemanas').textContent = document.querySelectorAll('.semana-item').length;
            
            actualizarSaberesEnTodasLasSemanas();
            actualizarSaberesManualesEnTodasLasSemanas();
            guardarDatosAutomaticamente();
            
            alert('‚úÖ Semana agregada correctamente');
        }

        function eliminarSemana(boton) {
            const semana = boton.closest('.semana-item');
            const index = parseInt(semana.getAttribute('data-semana-index'));
            
            if (index === 0) {
                alert("No se puede eliminar la primera semana.");
                return;
            }
            
            if (confirm("¬øEst√° seguro de que desea eliminar esta semana? Los datos de las otras semanas se conservar√°n.")) {
                const leccionesEnSemana = parseInt(semana.querySelector('.lecciones-contador').textContent);
                const leccionesActuales = parseInt(document.getElementById('leccionesPlanificadas').value);
                document.getElementById('leccionesPlanificadas').value = leccionesActuales - leccionesEnSemana;
                document.getElementById('totalLecciones').textContent = leccionesActuales - leccionesEnSemana;
                
                semana.remove();
                reindexarSemanas();
                document.getElementById('totalSemanas').textContent = document.querySelectorAll('.semana-item').length;
                guardarDatosAutomaticamente();
            }
        }

        // ===== FUNCIONALIDADES PRINCIPALES =====
        function actualizarRda() {
            const nivel = document.getElementById('nivel').value;
            const ciclo = document.getElementById('ciclo').value;
            const areasSeleccionadas = Array.from(document.querySelectorAll('input[name="area"]:checked')).map(cb => cb.value);
            const container = document.getElementById('rdaContainer');

            if (!nivel || areasSeleccionadas.length === 0) {
                container.innerHTML = '<div class="saberes-info">Seleccione un nivel y al menos un √°rea de conocimiento</div>';
                return;
            }

            let html = '';
            areasSeleccionadas.forEach(areaKey => {
                const areaNombre = getAreaName(areaKey);
                const rda = RDA_POR_CICLO[ciclo]?.[areaNombre] || "RdA no definido para esta √°rea y ciclo";
                html += `<div class="rda-item"><strong>${areaNombre}:</strong><br>${rda}</div><div class="rda-divider"></div>`;
            });

            container.innerHTML = html;
        }

        function actualizarSaberesEnTodasLasSemanas() {
            const nivel = document.getElementById('nivel').value;
            const areasSeleccionadas = Array.from(document.querySelectorAll('input[name="area"]:checked')).map(cb => cb.value);
            const semanas = document.querySelectorAll('.semana-item');
            
            semanas.forEach((semana, index) => {
                const container = semana.querySelector('.saberes-semana-opciones');
                cargarSaberesEnContenedor(container, nivel, areasSeleccionadas, index);
            });
        }

        function cargarSaberesEnContenedor(container, nivel, areasSeleccionadas, semanaIndex) {
            if (!nivel || areasSeleccionadas.length === 0) {
                container.innerHTML = '<div class="saberes-info">Seleccione nivel y √°reas de conocimiento</div>';
                return;
            }

            const nivelData = PNFT_DATA[nivel];
            if (!nivelData) {
                container.innerHTML = '<div class="saberes-info">No hay datos para este nivel</div>';
                return;
            }

            let html = '';
            areasSeleccionadas.forEach(areaKey => {
                const areaNombre = getAreaName(areaKey);
                const areaData = nivelData[areaNombre];
                
                if (areaData && areaData.saberes.length > 0) {
                    html += `<div class="area-saberes"><strong>${areaNombre}:</strong><br>`;
                    areaData.saberes.forEach(saber => {
                        html += `<label class="saber-item">
                                    <input type="checkbox" name="saberConceptualSemana${semanaIndex}" 
                                           value="${saber.nombre}" 
                                           data-indicadores='${JSON.stringify(saber.indicadores)}'
                                           data-semana-index="${semanaIndex}"
                                           onchange="actualizarIndicadoresLogroSemana(this); guardarDatosAutomaticamente()">
                                    <span>${saber.nombre}</span>
                                </label><br>`;
                    });
                    html += '</div><br>';
                }
            });

            container.innerHTML = html || '<div class="saberes-info">No hay saberes para esta combinaci√≥n</div>';
        }

        function actualizarSaberesManualesEnTodasLasSemanas() {
            const saberesManuales = document.getElementById('saberesManuales').value;
            const saberesArray = saberesManuales.split(';').filter(saber => saber.trim() !== '');
            const semanas = document.querySelectorAll('.semana-item');
            
            semanas.forEach((semana, index) => {
                const container = semana.querySelector(`#saberesManualesSemana${index}`);
                if (saberesArray.length > 0) {
                    let html = '<div style="margin-top: 10px;">';
                    saberesArray.forEach((saber, i) => {
                        html += `<label class="saber-item">
                                    <input type="checkbox" name="saberManualSemana${index}" 
                                           value="${saber.trim()}" 
                                           data-semana-index="${index}"
                                           onchange="actualizarIndicadoresLogroSemana(this); guardarDatosAutomaticamente()">
                                    <span>${saber.trim()}</span>
                                </label>${i < saberesArray.length - 1 ? '<br>' : ''}`;
                    });
                    html += '</div>';
                    container.innerHTML = html;
                } else {
                    container.innerHTML = '<em>No hay saberes manuales definidos</em>';
                }
            });
        }

        // ===== MEJORA 1: INDICADORES DE LOGRO CON FORMATO DE LISTA MEJORADO =====
        function actualizarIndicadoresLogroSemana(checkbox) {
            const semanaIndex = checkbox.getAttribute('data-semana-index');
            const semana = document.querySelector(`.semana-item[data-semana-index="${semanaIndex}"]`);
            const contenedor = semana.querySelector('.contenedor-editable[contenteditable="false"]');
            
            const saberesSeleccionados = Array.from(semana.querySelectorAll(`input[name="saberConceptualSemana${semanaIndex}"]:checked`));
            const saberesManualesSeleccionados = Array.from(semana.querySelectorAll(`input[name="saberManualSemana${semanaIndex}"]:checked`));
            
            let indicadores = [];
            
            saberesSeleccionados.forEach(cb => {
                try {
                    const indicadoresSaber = JSON.parse(cb.getAttribute('data-indicadores') || '[]');
                    indicadores = indicadores.concat(indicadoresSaber);
                } catch (error) {
                    console.error("Error parseando indicadores:", error);
                }
            });
            
            saberesManualesSeleccionados.forEach(cb => {
                indicadores.push(`Aplica el concepto de "${cb.value}" en situaciones pr√°cticas del contexto educativo.`);
            });
            
            // MEJORA: Usar formato de lista HTML con mejor espaciado
            if (indicadores.length > 0) {
                contenedor.innerHTML = `<ul class="indicadores-lista">${indicadores.map(ind => `<li>${ind}</li>`).join('')}</ul>`;
            } else {
                contenedor.innerHTML = "Seleccione al menos dos saberes conceptuales para esta semana.";
            }
        }

        // ===== MEJORA 2: SISTEMA DE IA EXTERNA MEJORADO =====
        function abrirSelectorIA(semanaIndex) {
            const prompt = generarPromptExternoCompleto(semanaIndex);
            
            const modalHTML = `
            <div id="selectorIAModal" class="modal" style="display: block;">
                <div class="modal-content" style="text-align: center; max-width: 500px;">
                    <h3>ü™Ñ Enviar Prompt a IA Externa</h3>
                    <p style="margin: 15px 0; color: #666;">El prompt se copiar√° autom√°ticamente al portapapeles</p>
                    
                    <div style="display: flex; gap: 15px; justify-content: center; margin: 20px 0;">
                        <button class="btn btn-primary" onclick="seleccionarIA('chatgpt', ${semanaIndex})" 
                                style="padding: 15px 25px; font-size: 16px;">
                            ü§ñ ChatGPT
                        </button>
                        <button class="btn btn-primary" onclick="seleccionarIA('copilot', ${semanaIndex})" 
                                style="padding: 15px 25px; font-size: 16px; background: #0078d4;">
                            üöÄ Microsoft Copilot
                        </button>
                    </div>
                    
                    <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin: 15px 0; text-align: left;">
                        <strong>Instrucciones:</strong>
                        <ol style="margin: 10px 0; padding-left: 20px;">
                            <li>Seleccione la IA de su preferencia</li>
                            <li>El prompt se copiar√° autom√°ticamente</li>
                            <li>Se abrir√° la p√°gina de la IA en nueva pesta√±a</li>
                            <li>Pegue el prompt con Ctrl+V</li>
                            <li>¬°Listo para usar!</li>
                        </ol>
                    </div>
                    
                    <button onclick="cerrarModalIA()" class="btn btn-outline" style="width: 100%; margin-top: 15px;">
                        Cancelar
                    </button>
                </div>
            </div>`;
            
            document.body.insertAdjacentHTML('beforeend', modalHTML);
        }

        function seleccionarIA(tipo, semanaIndex) {
            const prompt = generarPromptExternoCompleto(semanaIndex);
            
            // Copiar al portapapeles
            navigator.clipboard.writeText(prompt).then(() => {
                // Abrir la IA correspondiente
                const urls = {
                    'chatgpt': 'https://chat.openai.com/',
                    'copilot': 'https://copilot.microsoft.com/'
                };
                
                window.open(urls[tipo], '_blank');
                
                // Mostrar confirmaci√≥n
                const nombreIA = tipo === 'chatgpt' ? 'ChatGPT' : 'Microsoft Copilot';
                alert(`‚úÖ Prompt copiado al portapapeles\n\nAhora:\n1. Vaya a la pesta√±a de ${nombreIA}\n2. Pegue con Ctrl+V\n3. ¬°Listo para usar!`);
                
                cerrarModalIA();
            }).catch(err => {
                // Fallback para navegadores que no soportan clipboard API
                const textarea = document.createElement('textarea');
                textarea.value = prompt;
                document.body.appendChild(textarea);
                textarea.select();
                document.execCommand('copy');
                document.body.removeChild(textarea);
                
                const urls = {
                    'chatgpt': 'https://chat.openai.com/',
                    'copilot': 'https://copilot.microsoft.com/'
                };
                
                window.open(urls[tipo], '_blank');
                
                const nombreIA = tipo === 'chatgpt' ? 'ChatGPT' : 'Microsoft Copilot';
                alert(`‚úÖ Prompt copiado al portapapeles\n\nAhora:\n1. Vaya a la pesta√±a de ${nombreIA}\n2. Pegue con Ctrl+V\n3. ¬°Listo para usar!`);
                
                cerrarModalIA();
            });
        }

        function generarPromptExternoCompleto(semanaIndex) {
            const nivel = document.getElementById('nivel').value;
            const ciclo = document.getElementById('ciclo').value;
            const areasSeleccionadas = Array.from(document.querySelectorAll('input[name="area"]:checked')).map(cb => getAreaName(cb.value));
            const ejesTransversales = Array.from(document.querySelectorAll('input[name="eje"]:checked')).map(cb => {
                const labels = {
                    'ciudadania': 'Ciudadan√≠a y √©tica digital',
                    'pensamiento': 'Pensamiento computacional para la resoluci√≥n de problemas',
                    'emprendimiento': 'Emprendimiento e Innovaci√≥n'
                };
                return labels[cb.value] || cb.value;
            });
            
            const metodologia = document.getElementById('metodologiaActiva').value;
            const metodologiaOtra = document.getElementById('metodologiaOtra').value;
            const metodologiaFinal = metodologia === 'otra' ? metodologiaOtra : 
                                    document.querySelector(`#metodologiaActiva option[value="${metodologia}"]`)?.textContent || 'No especificado';
            
            // Obtener saberes conceptuales seleccionados para esta semana
            const semana = document.querySelector(`.semana-item[data-semana-index="${semanaIndex}"]`);
            const saberesConceptuales = Array.from(semana.querySelectorAll(`input[name="saberConceptualSemana${semanaIndex}"]:checked`)).map(cb => cb.value);
            const saberesManuales = Array.from(semana.querySelectorAll(`input[name="saberManualSemana${semanaIndex}"]:checked`)).map(cb => cb.value);
            const todosSaberes = [...saberesConceptuales, ...saberesManuales];
            
            // Obtener indicadores de logro REALES de la base de datos
            const indicadoresLogro = obtenerIndicadoresLogroReales(nivel, areasSeleccionadas, saberesConceptuales);
            
            // Obtener saberes procedimentales y actitudinales seleccionados
            const saberesProcedimentales = Array.from(document.querySelectorAll('input[name="procedimental"]:checked')).map(cb => {
                const labels = {
                    'reconoce': 'Reconoce patrones',
                    'abstrae': 'Abstrae',
                    'generaliza': 'Generaliza',
                    'transfiere': 'Transfiere',
                    'modulariza': 'Modulariza',
                    'formula': 'Formula algoritmos',
                    'remezcla': 'Remezcla',
                    'depura': 'Depura',
                    'programa': 'Programa',
                    'comunica': 'Comunica',
                    'colabora': 'Colabora',
                    'piensa': 'Piensa de forma creativa',
                    'maneja': 'Maneja las tecnolog√≠as de forma √©tica y segura'
                };
                return labels[cb.value] || cb.value;
            });
            
            const saberesActitudinales = Array.from(document.querySelectorAll('input[name="actitudinal"]:checked')).map(cb => {
                const labels = {
                    'gusto': 'Gusto por la precisi√≥n',
                    'aprender': 'Aprender del error',
                    'flexibilidad': 'Flexibilidad para manejar problemas',
                    'tolerancia': 'Tolerancia a la frustraci√≥n'
                };
                return labels[cb.value] || cb.value;
            });
            
            const indicadoresEvaluacion = "No especificado";
            
            return `Dise√±a una actividad PNFT para el ciclo ${ciclo || "No especificado"}, nivel ${nivel || "No especificado"} en las √°reas de conocimiento: ${areasSeleccionadas.join(', ') || "No especificado"}, con los ejes transversales (elegidos por el docente): ${ejesTransversales.join(', ') || "No especificado"}

Saberes conceptuales: ${todosSaberes.join(', ') || "No especificado"}

Indicadores de logro (autom√°ticos por el sistema mediante los saberes conceptuales que eligi√≥ el docente):
${indicadoresLogro.map(ind => `‚Ä¢ ${ind}`).join('\n')}

Indicadores de evaluaci√≥n (personalizados): ${indicadoresEvaluacion}

Saberes procedimentales: ${saberesProcedimentales.join(', ') || "No especificado"}

Saberes actitudinales: ${saberesActitudinales.join(', ') || "No especificado"}

Metodolog√≠a elegida: ${metodologiaFinal || "No especificado"}

Componente de evaluaci√≥n seg√∫n reglamento y lineamientos del MEP: El docente puede en alg√∫n momento solicitar que la actividad o sugerencia sea para tareas, pruebas, trabajo cotidiano o proyecto en caso de secundaria.

Tema ( En caso que el docente especifique alg√∫n tema qu√© desarrollar√° adicional con los saberes conceptuales o si es proyecto en secundaria o es para tarea, prueba o trabajo cotidiano): No especificado

Duraci√≥n: 40-80 min. (1 o 2 lecciones), o bien por semanas que eligi√≥ el docente.

Estructura: competencia (articulaci√≥n de los saberes conceptuales), secuencia de la actividad (inicio, desarrollo, cierre), sugerencias de evaluaci√≥n seg√∫n instrumentos del MEP.

Proporciona una actividad completa que integre todos estos elementos de manera coherente y alineada con el curr√≠culo del PNFT.`;
        }

        function obtenerIndicadoresLogroReales(nivel, areasSeleccionadas, saberesConceptuales) {
            if (!nivel || !areasSeleccionadas || areasSeleccionadas.length === 0 || !saberesConceptuales || saberesConceptuales.length === 0) {
                return ["No especificado"];
            }
            
            const indicadores = [];
            const nivelData = PNFT_DATA[nivel];
            
            if (!nivelData) {
                return ["No hay datos para este nivel"];
            }
            
            // Buscar indicadores para cada saber conceptual seleccionado
            saberesConceptuales.forEach(saberNombre => {
                areasSeleccionadas.forEach(areaNombre => {
                    const areaData = nivelData[areaNombre];
                    if (areaData && areaData.saberes) {
                        const saberEncontrado = areaData.saberes.find(s => s.nombre === saberNombre);
                        if (saberEncontrado && saberEncontrado.indicadores) {
                            indicadores.push(...saberEncontrado.indicadores);
                        }
                    }
                });
            });
            
            // Si no se encontraron indicadores, buscar en todas las √°reas
            if (indicadores.length === 0) {
                Object.values(nivelData).forEach(areaData => {
                    if (areaData && areaData.saberes) {
                        const saberEncontrado = areaData.saberes.find(s => s.nombre === saberesConceptuales[0]);
                        if (saberEncontrado && saberEncontrado.indicadores) {
                            indicadores.push(...saberEncontrado.indicadores);
                        }
                    }
                });
            }
            
            return indicadores.length > 0 ? indicadores : ["No se encontraron indicadores para los saberes seleccionados"];
        }

        function cerrarModalIA() {
            const modal = document.getElementById('selectorIAModal');
            if (modal) {
                modal.remove();
            }
        }

        // ===== SISTEMA DE EXPANSI√ìN =====
        function toggleExpansion(button) {
            const col = button.closest('.semana-col');
            const contenedor = col.querySelector('.contenedor-editable');
            contenedor.style.minHeight = contenedor.style.minHeight === '400px' ? '150px' : '400px';
            
            if (contenedor.style.minHeight === '400px') {
                button.textContent = '‚àí';
                button.title = 'Contraer';
            } else {
                button.textContent = '+';
                button.title = 'Expandir';
            }
        }

        // ===== FUNCIONES AUXILIARES =====
        function getAreaName(areaKey) {
            const areas = {
                'apropiacion': 'Apropiaci√≥n tecnol√≥gica y Digital',
                'programacion': 'Programaci√≥n y Algoritmos', 
                'robotica': 'Computaci√≥n f√≠sica y Rob√≥tica',
                'ciencia': 'Ciencia de datos e Inteligencia Artificial'
            };
            return areas[areaKey] || areaKey;
        }

        function recopilarDatosPlan() {
            const datos = {
                direccionRegional: document.getElementById('direccionRegional').value,
                centroEducativo: document.getElementById('centroEducativo').value,
                codigoCentro: document.getElementById('codigoCentro').value,
                nombreDocente: document.getElementById('nombreDocente').value,
                ciclo: document.getElementById('ciclo').value,
                nivel: document.getElementById('nivel').value,
                leccionesPlanificadas: document.getElementById('leccionesPlanificadas').value,
                mesInicio: document.getElementById('mesInicio').value,
                mesFinal: document.getElementById('mesFinal').value,
                periodicidad: document.querySelector('input[name="periodicidad"]:checked')?.value,
                ejesTransversales: Array.from(document.querySelectorAll('input[name="eje"]:checked')).map(cb => cb.value),
                metodologiaActiva: document.getElementById('metodologiaActiva').value,
                metodologiaOtra: document.getElementById('metodologiaOtra').value,
                areasConocimiento: Array.from(document.querySelectorAll('input[name="area"]:checked')).map(cb => cb.value),
                saberesManuales: document.getElementById('saberesManuales').value,
                saberesProcedimentales: Array.from(document.querySelectorAll('input[name="procedimental"]:checked')).map(cb => cb.value),
                saberesActitudinales: Array.from(document.querySelectorAll('input[name="actitudinal"]:checked')).map(cb => cb.value),
                queFunciono: document.getElementById('queFunciono').value,
                queNoFunciono: document.getElementById('queNoFunciono').value,
                queMejorar: document.getElementById('queMejorar').value,
                observaciones: document.getElementById('observaciones').value,
                semanas: []
            };
            
            document.querySelectorAll('.semana-item').forEach((semana, index) => {
                const contenedores = semana.querySelectorAll('.contenedor-editable');
                const datosSemana = {
                    nombre: semana.querySelector('.semana-nombre').value,
                    lecciones: semana.querySelector('.lecciones-contador').textContent,
                    indicadoresLogro: contenedores[0]?.innerHTML || '',
                    estrategiasMediacion: contenedores[1]?.textContent || '',
                    indicadorEvaluacion: contenedores[2]?.textContent || '',
                    saberesConceptuales: Array.from(semana.querySelectorAll(`input[name="saberConceptualSemana${index}"]:checked`)).map(cb => cb.value),
                    saberesManuales: Array.from(semana.querySelectorAll(`input[name="saberManualSemana${index}"]:checked`)).map(cb => cb.value)
                };
                datos.semanas.push(datosSemana);
            });
            
            return datos;
        }

        function cargarDatosSemanasGuardados(plan = null) {
            if (!plan) {
                const datosGuardados = localStorage.getItem('planActual');
                if (datosGuardados) {
                    plan = JSON.parse(datosGuardados);
                } else {
                    return;
                }
            }
            
            if (plan.semanas) {
                plan.semanas.forEach((semanaData, index) => {
                    const semanaElement = document.querySelector(`.semana-item[data-semana-index="${index}"]`);
                    if (semanaElement) {
                        if (semanaData.nombre) semanaElement.querySelector('.semana-nombre').value = semanaData.nombre;
                        
                        const contenedores = semanaElement.querySelectorAll('.contenedor-editable');
                        if (semanaData.indicadoresLogro && contenedores[0]) contenedores[0].innerHTML = semanaData.indicadoresLogro;
                        if (semanaData.estrategiasMediacion && contenedores[1]) contenedores[1].textContent = semanaData.estrategiasMediacion;
                        if (semanaData.indicadorEvaluacion && contenedores[2]) contenedores[2].textContent = semanaData.indicadorEvaluacion;
                        
                        if (semanaData.saberesConceptuales) {
                            semanaData.saberesConceptuales.forEach(saber => {
                                const checkbox = semanaElement.querySelector(`input[name="saberConceptualSemana${index}"][value="${saber}"]`);
                                if (checkbox) checkbox.checked = true;
                            });
                        }
                        
                        if (semanaData.saberesManuales) {
                            semanaData.saberesManuales.forEach(saber => {
                                const checkbox = semanaElement.querySelector(`input[name="saberManualSemana${index}"][value="${saber}"]`);
                                if (checkbox) checkbox.checked = true;
                            });
                        }
                        
                        actualizarIndicadoresLogroDesdeDatos(semanaElement, index);
                    }
                });
            }
        }

        function actualizarIndicadoresLogroDesdeDatos(semanaElement, index) {
            const contenedor = semanaElement.querySelector('.contenedor-editable[contenteditable="false"]');
            const saberesSeleccionados = Array.from(semanaElement.querySelectorAll(`input[name="saberConceptualSemana${index}"]:checked`));
            const saberesManualesSeleccionados = Array.from(semanaElement.querySelectorAll(`input[name="saberManualSemana${index}"]:checked`));
            
            let indicadores = [];
            
            saberesSeleccionados.forEach(cb => {
                try {
                    const indicadoresSaber = JSON.parse(cb.getAttribute('data-indicadores') || '[]');
                    indicadores = indicadores.concat(indicadoresSaber);
                } catch (error) {
                    console.error("Error parseando indicadores:", error);
                }
            });

           saberesManualesSeleccionados.forEach(cb => {
                indicadores.push(`Aplica el concepto de "${cb.value}" en situaciones pr√°cticas del contexto educativo.`);
            });
            
            if (contenedor) {
                if (indicadores.length > 0) {
                    contenedor.innerHTML = `<ul class="indicadores-lista">${indicadores.map(ind => `<li>${ind}</li>`).join('')}</ul>`;
                } else {
                    contenedor.innerHTML = "Seleccione al menos dos saberes conceptuales para esta semana.";
                }
            }
        }

        function reindexarSemanas() {
            document.querySelectorAll('.semana-item').forEach((semana, index) => {
                semana.setAttribute('data-semana-index', index);
                
                const saberesConceptuales = semana.querySelectorAll(`input[name^="saberConceptualSemana"]`);
                saberesConceptuales.forEach(input => {
                    input.name = `saberConceptualSemana${index}`;
                    input.setAttribute('data-semana-index', index);
                });
                
                const saberesManuales = semana.querySelectorAll(`input[name^="saberManualSemana"]`);
                saberesManuales.forEach(input => {
                    input.name = `saberManualSemana${index}`;
                    input.setAttribute('data-semana-index', index);
                });
            });
        }

        // ===== FUNCIONES DE GUARDADO Y CARGA =====
        function guardarPlan() {
            const nivel = document.getElementById('nivel').value;
            const areasSeleccionadas = Array.from(document.querySelectorAll('input[name="area"]:checked'));
            
            if (!nivel || areasSeleccionadas.length === 0) {
                alert('‚ùå Para guardar un plan, debe seleccionar al menos un nivel y un √°rea de conocimiento');
                return;
            }
            
            document.getElementById('nombrePlan').value = generarNombreSugerido();
            document.getElementById('guardarModal').style.display = 'block';
        }

        function cargarPlan() {
            mostrarPlanesGuardados();
            document.getElementById('cargarModal').style.display = 'block';
        }

        function confirmarGuardar() {
            const nombre = document.getElementById('nombrePlan').value.trim();
            if (!nombre) {
                alert('‚ùå Por favor ingrese un nombre para el plan');
                return;
            }

            const plan = recopilarDatosPlan();
            plan.id = Date.now();
            plan.fechaCreacion = new Date().toISOString();
            plan.nombre = nombre;

            const indiceExistente = planesGuardados.findIndex(p => p.nombre === nombre);
            if (indiceExistente !== -1) {
                if (confirm('‚ö†Ô∏è Ya existe un plan con ese nombre. ¬øDesea reemplazarlo?')) {
                    planesGuardados[indiceExistente] = plan;
                } else {
                    return;
                }
            } else {
                planesGuardados.push(plan);
            }

            localStorage.setItem('planesDidacticos', JSON.stringify(planesGuardados));
            cerrarModal();
            alert(`‚úÖ Plan "${nombre}" guardado exitosamente!`);
        }

        function confirmarCargar() {
            if (!planSeleccionado) {
                alert('‚ùå Por favor seleccione un plan de la lista');
                return;
            }

            const plan = planesGuardados.find(p => p.id === planSeleccionado);
            if (plan) {
                cargarDatosPlan(plan);
                cerrarModal();
                alert(`‚úÖ Plan "${plan.nombre}" cargado correctamente`);
            }
        }

        function mostrarPlanesGuardados() {
            const lista = document.getElementById('listaPlanes');
            
            if (planesGuardados.length === 0) {
                lista.innerHTML = '<div class="saberes-info">No hay planes guardados</div>';
                return;
            }

            lista.innerHTML = planesGuardados.map(plan => `
                <div class="plan-item" onclick="seleccionarPlan(${plan.id})" data-plan-id="${plan.id}">
                    <strong>${plan.nombre}</strong>
                    <div class="plan-details">
                        <span>Nivel: ${plan.nivel || 'No especificado'}</span>
                        <span>${new Date(plan.fechaCreacion).toLocaleDateString()}</span>
                    </div>
                </div>
            `).join('');
        }

        function seleccionarPlan(planId) {
            document.querySelectorAll('.plan-item').forEach(item => {
                item.classList.remove('selected');
            });
            document.querySelector(`[data-plan-id="${planId}"]`).classList.add('selected');
            planSeleccionado = planId;
        }

        function cargarDatosPlan(plan) {
            if (plan.direccionRegional) document.getElementById('direccionRegional').value = plan.direccionRegional;
            if (plan.centroEducativo) document.getElementById('centroEducativo').value = plan.centroEducativo;
            if (plan.codigoCentro) document.getElementById('codigoCentro').value = plan.codigoCentro;
            if (plan.nombreDocente) document.getElementById('nombreDocente').value = plan.nombreDocente;
            if (plan.ciclo) document.getElementById('ciclo').value = plan.ciclo;
            if (plan.nivel) document.getElementById('nivel').value = plan.nivel;
            if (plan.leccionesPlanificadas) {
                document.getElementById('leccionesPlanificadas').value = plan.leccionesPlanificadas;
                document.getElementById('totalLecciones').textContent = plan.leccionesPlanificadas;
            }
            if (plan.mesInicio) document.getElementById('mesInicio').value = plan.mesInicio;
            if (plan.mesFinal) document.getElementById('mesFinal').value = plan.mesFinal;
            if (plan.periodicidad) {
                document.querySelector(`input[name="periodicidad"][value="${plan.periodicidad}"]`).checked = true;
            }
            
            if (plan.ejesTransversales) {
                document.querySelectorAll('input[name="eje"]').forEach(checkbox => {
                    checkbox.checked = plan.ejesTransversales.includes(checkbox.value);
                    checkbox.closest('.eje-option').classList.toggle('selected', checkbox.checked);
                });
            }
            
            if (plan.metodologiaActiva) {
                document.getElementById('metodologiaActiva').value = plan.metodologiaActiva;
                if (plan.metodologiaActiva === 'otra' && plan.metodologiaOtra) {
                    document.getElementById('metodologiaOtra').value = plan.metodologiaOtra;
                    document.getElementById('metodologiaOtra').style.display = 'block';
                }
            }
            
            if (plan.areasConocimiento) {
                document.querySelectorAll('input[name="area"]').forEach(checkbox => {
                    checkbox.checked = plan.areasConocimiento.includes(checkbox.value);
                });
            }
            
            if (plan.saberesManuales) document.getElementById('saberesManuales').value = plan.saberesManuales;
            if (plan.saberesProcedimentales) {
                document.querySelectorAll('input[name="procedimental"]').forEach(checkbox => {
                    checkbox.checked = plan.saberesProcedimentales.includes(checkbox.value);
                });
            }
            if (plan.saberesActitudinales) {
                document.querySelectorAll('input[name="actitudinal"]').forEach(checkbox => {
                    checkbox.checked = plan.saberesActitudinales.includes(checkbox.value);
                });
            }
            
            if (plan.queFunciono) document.getElementById('queFunciono').value = plan.queFunciono;
            if (plan.queNoFunciono) document.getElementById('queNoFunciono').value = plan.queNoFunciono;
            if (plan.queMejorar) document.getElementById('queMejorar').value = plan.queMejorar;
            if (plan.observaciones) document.getElementById('observaciones').value = plan.observaciones;
            
            actualizarRda();
            generarSemanas();
            
            setTimeout(() => {
                cargarDatosSemanasGuardados(plan);
            }, 100);
        }

        function generarNombreSugerido() {
            const nivel = document.getElementById('nivel').value || 'Nivel';
            const ciclo = document.getElementById('ciclo').value || 'Ciclo';
            const fecha = new Date().toLocaleDateString();
            return `${nivel} - ${ciclo} - ${fecha}`;
        }

        function cerrarModal() {
            document.getElementById('guardarModal').style.display = 'none';
            document.getElementById('cargarModal').style.display = 'none';
            planSeleccionado = null;
        }

        function exportarPDF() {
            window.print();
        }

        function exportarPlan() {
            const plan = recopilarDatosPlan();
            const datosExportar = {
                ...plan,
                fechaExportacion: new Date().toISOString(),
                version: '1.0'
            };
            
            const blob = new Blob([JSON.stringify(datosExportar, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `planeamiento-${new Date().toISOString().split('T')[0]}.json`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            alert('‚úÖ Plan exportado correctamente. Guarde el archivo en su disco duro o USB.');
        }

        function importarPlan() {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = '.json';
            input.onchange = function(e) {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        try {
                            const plan = JSON.parse(e.target.result);
                            cargarDatosPlan(plan);
                            alert('‚úÖ Plan importado correctamente');
                        } catch (error) {
                            alert('‚ùå Error al importar el plan: Archivo inv√°lido');
                        }
                    };
                    reader.readAsText(file);
                }
            };
            input.click();
        }

        function nuevoPlan() {
            if (confirm('¬øEst√° seguro de que desea crear un nuevo plan? Se perder√°n los cambios no guardados.')) {
                localStorage.removeItem('planActual');
                location.reload();
            }
        }

        // Cerrar modales al hacer click fuera
        window.onclick = function(event) {
            const modals = document.getElementsByClassName('modal');
            for (let modal of modals) {
                if (event.target == modal) {
                    cerrarModal();
                }
            }
        }
    </script>
</body>
</html>